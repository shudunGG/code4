{"version":3,"file":"js/722-legacy.0e122362.js","mappings":"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","sources":["webpack://xsecmcx/./src/views/IndexView.vue","webpack://xsecmcx/./src/utils/checkCode.js","webpack://xsecmcx/src/views/IndexView.vue","webpack://xsecmcx/./src/views/IndexView.vue?c62b","webpack://xsecmcx/./src/views/IndexView.vue?09b3"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_vm._m(0),_c('div',{staticClass:\"main box1200\"},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"content-container\"},[_c('section',{staticClass:\"query-container\"},[_c('el-form',{ref:\"formData\",attrs:{\"action\":\"\",\"model\":_vm.formData,\"label-position\":\"right\",\"label-width\":\"120px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"出发站点\",\"prop\":\"fromCityValue\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"出发站点\"},on:{\"change\":function($event){return _vm.fromacityChange(_vm.formData.fromCityValue)}},model:{value:(_vm.formData.fromCityValue),callback:function ($$v) {_vm.$set(_vm.formData, \"fromCityValue\", $$v)},expression:\"formData.fromCityValue\"}},_vm._l((_vm.fromacity),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"出发时间\",\"prop\":\"departDate\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"value-format\":\"yyyy-MM-dd\",\"editable\":false,\"picker-options\":_vm.pickerOptions,\"type\":\"date\",\"placeholder\":\"请选择出发日期\"},on:{\"change\":_vm.dataChange},model:{value:(_vm.formData.departDate),callback:function ($$v) {_vm.$set(_vm.formData, \"departDate\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.departDate\"}})],1),_c('el-form-item',{attrs:{\"label\":\"到达站点\",\"prop\":\"destination\"}},[_c('el-autocomplete',{staticStyle:{\"width\":\"100%\"},attrs:{\"fetch-suggestions\":_vm.querySearchAsync,\"placeholder\":\"请输入内容\"},on:{\"select\":_vm.handleSelect},model:{value:(_vm.state),callback:function ($$v) {_vm.state=$$v},expression:\"state\"}})],1),_c('div',{staticClass:\"verification-code\"},[_c('el-form-item',{attrs:{\"label\":\"验证码\",\"prop\":\"code\"}},[_c('el-input',{staticClass:\"ipt\",attrs:{\"placeholder\":\"请输入\",\"maxlength\":\"4\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.submitForm('formData')}},model:{value:(_vm.formData.code),callback:function ($$v) {_vm.$set(_vm.formData, \"code\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formData.code\"}})],1),_c('div',{staticClass:\"code\",on:{\"click\":_vm.updateCode}},[_c('canvas',{attrs:{\"id\":\"canvas\",\"width\":\"100\",\"height\":\"38\"}})])],1),_c('div',{staticClass:\"form-btn\"},[_c('input',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"value\":\"查询\"},on:{\"click\":function($event){return _vm.submitForm('formData')}}}),_c('input',{staticClass:\"reset\",attrs:{\"type\":\"button\",\"value\":\"重置\"},on:{\"click\":function($event){return _vm.resetForm('formData')}}})])],1)],1),_c('router-view')],1)]),_vm._m(1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"banner-container\"},[_c('div',{staticClass:\"banner-content box1200\"},[_c('h1',[_vm._v(\"汽车票查询\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"footer_bottom\"},[_vm._v(\"本服务由甘肃省提供\")])])\n}]\n\nexport { render, staticRenderFns }","let  code = \"\"\r\n//得到随机的颜色值\r\nfunction randomColor() {\r\n    var r = Math.floor(Math.random() * 256);\r\n    var g = Math.floor(Math.random() * 256);\r\n    var b = Math.floor(Math.random() * 256);\r\n    return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\r\n}\r\nfunction createCode() {\r\n    var show_num = []\r\n    var canvas_width = document.getElementById(\"canvas\").width;\r\n    var canvas_height = document.getElementById(\"canvas\").height;\r\n    var canvas = document.getElementById(\"canvas\"); //获取到canvas的对象，演员\r\n    var context = canvas.getContext(\"2d\"); //获取到canvas画图的环境，演员表演的舞台\r\n    canvas.width = canvas_width;\r\n    canvas.height = canvas_height;\r\n    var sCode =\r\n        \"a,b,c,d,e,f,g,h,i,j,k,m,n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0\";\r\n    var aCode = sCode.split(\",\");\r\n    var aLength = aCode.length; //获取到数组的长度\r\n    for (var i = 0; i < 4; i++) {\r\n        //这里的for循环可以控制验证码位数（如果想显示6位数，4改成6即可）\r\n        var j = Math.floor(Math.random() * aLength); //获取到随机的索引值\r\n        // var deg = Math.random() * 30 * Math.PI / 180;//产生0~30之间的随机弧度\r\n        var deg = Math.random() - 0.5; //产生一个随机弧度\r\n        var txt = aCode[j]; //得到随机的一个内容\r\n        show_num[i] = txt.toLowerCase();\r\n        var x = 10 + i * 18; //文字在canvas上的x坐标\r\n        var y = 20 + Math.random() * 8; //文字在canvas上的y坐标\r\n        context.font = \"bold 23px 微软雅黑\";\r\n        context.translate(x, y);\r\n        context.rotate(deg);\r\n        context.fillStyle = randomColor();\r\n        context.fillText(txt, 0, 0);\r\n        context.rotate(-deg);\r\n        context.translate(-x, -y);\r\n    }\r\n    for (let i = 0; i <= 5; i++) {\r\n        //验证码上显示线条\r\n        context.strokeStyle = randomColor();\r\n        context.beginPath();\r\n        context.moveTo(\r\n            Math.random() * canvas_width,\r\n            Math.random() * canvas_height\r\n        );\r\n        context.lineTo(\r\n            Math.random() * canvas_width,\r\n            Math.random() * canvas_height\r\n        );\r\n        context.stroke();\r\n    }\r\n    for (let i = 0; i <= 30; i++) {\r\n        //验证码上显示小点\r\n        context.strokeStyle = randomColor();\r\n        context.beginPath();\r\n        let x = Math.random() * canvas_width;\r\n        let y = Math.random() * canvas_height;\r\n        context.moveTo(x, y);\r\n        context.lineTo(x + 1, y + 1);\r\n        context.stroke();\r\n    }\r\n    code = show_num.join(\"\");\r\n}\r\n\r\n//校验验证码\r\nfunction validateCode(inputCode) {\r\n\r\n    if (inputCode.length <= 0) { //若输入的验证码长度为0\r\n        return false\r\n    } else if (inputCode !== code) { //若输入的验证码与产生的验证码不一致时\r\n        return false\r\n    } else { //输入正确时\r\n        return true\r\n    }\r\n}\r\nexport {\r\n    createCode,\r\n    validateCode,\r\n}","<template>\r\n  <div>\r\n    <div class=\"banner-container\">\r\n      <div class=\"banner-content box1200\">\r\n        <h1>汽车票查询</h1>\r\n      </div>\r\n    </div>\r\n    <div class=\"main box1200\">\r\n      <div class=\"content-container\" v-loading=\"loading\">\r\n        <section class=\"query-container\">\r\n          <el-form action=\"\" :model=\"formData\" ref=\"formData\" label-position=\"right\" label-width=\"120px\" :rules=\"rules\">\r\n            <el-form-item label=\"出发站点\" prop=\"fromCityValue\">\r\n<!--              <el-input maxlength=\"20\" class=\"slt\" placeholder=\"请输入出发站点\" clearable v-model.trim=\"formData.depart\">-->\r\n<!--              </el-input>-->\r\n              <el-select v-model=\"formData.fromCityValue\" placeholder=\"出发站点\" style=\"width: 100%\" @change=\"fromacityChange(formData.fromCityValue)\">\r\n                <el-option\r\n                    v-for=\"item in fromacity\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"出发时间\" prop=\"departDate\">\r\n              <el-date-picker value-format=\"yyyy-MM-dd\" :editable=\"false\" v-model.trim=\"formData.departDate\"\r\n                :picker-options=\"pickerOptions\" type=\"date\" placeholder=\"请选择出发日期\" @change=\"dataChange\"  style=\"width: 100%\">\r\n              </el-date-picker>\r\n            </el-form-item>\r\n            <el-form-item label=\"到达站点\" prop=\"destination\">\r\n<!--              <el-input maxlength=\"20\" class=\"slt\" placeholder=\"请输入到达站点\" clearable v-model.trim=\"formData.destination\">-->\r\n<!--              </el-input>-->\r\n<!--              <el-select v-model=\"toCityValue\" placeholder=\"到达站点\"  style=\"width: 100%\" @change=\"selectToCityValue(toCityValue)\">-->\r\n<!--                <el-option-->\r\n<!--                    v-for=\"item in tocolumns\"-->\r\n<!--                    :key=\"item.value\"-->\r\n<!--                    :label=\"item.label\"-->\r\n<!--                    :value=\"item.value\">-->\r\n<!--                </el-option>-->\r\n<!--              </el-select>-->\r\n              <el-autocomplete style=\"width: 100%\"\r\n                  v-model=\"state\"\r\n                  :fetch-suggestions=\"querySearchAsync\"\r\n                  placeholder=\"请输入内容\"\r\n                  @select=\"handleSelect\"\r\n              ></el-autocomplete>\r\n            </el-form-item>\r\n            <div class=\"verification-code\">\r\n              <el-form-item label=\"验证码\" prop=\"code\">\r\n                <el-input class=\"ipt\" placeholder=\"请输入\" maxlength=\"4\" v-model.trim=\"formData.code\"\r\n                  @keyup.enter.native=\"submitForm('formData')\">\r\n                </el-input>\r\n              </el-form-item>\r\n              <div class=\"code\" @click=\"updateCode\">\r\n                <canvas id=\"canvas\" width=\"100\" height=\"38\"></canvas>\r\n              </div>\r\n            </div>\r\n            <div class=\"form-btn\">\r\n              <input type=\"button\" class=\"submit\" value=\"查询\" @click=\"submitForm('formData')\" />\r\n              <input type=\"button\" value=\"重置\" @click=\"resetForm('formData')\" class=\"reset\" />\r\n            </div>\r\n          </el-form>\r\n        </section>\r\n        <router-view></router-view>\r\n      </div>\r\n    </div>\r\n    <div class=\"footer\">\r\n      <div class=\"footer_bottom\">本服务由甘肃省提供</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n// import { applicationAPI } from '@/api/index'\r\nimport serverApi from '@/api/index'\r\nimport { createCode, validateCode } from '@/utils/checkCode'\r\n// import {fromPairs} from \"lodash/array\";\r\nexport default {\r\n  name: 'IndexView',\r\n  data() {\r\n    const checkCode = (rule, value, callback) => {\r\n      if (!validateCode(value.toLowerCase())) {\r\n        this.formData.code = ''\r\n        return callback(new Error('验证码错误'))\r\n      }\r\n      callback()\r\n    }\r\n    // let checkCodefromCity = (rule, value, callback) => {\r\n      // if (!this.fromCity(value)) {\r\n      //   callback(new Error(\"不能含有特殊字符\"));\r\n      // } else {\r\n      //   callback();\r\n      // }\r\n    // };\r\n    // let checkCodedata = (rule, value, callback) => {\r\n      // if (!this.data(value)) {\r\n      //   callback(new Error(\"不能含有特殊字符\"));\r\n      // } else {\r\n      //   callback();\r\n      // }\r\n    // };\r\n    return {\r\n      restaurants: [],\r\n      state: '',\r\n      timeout:  null,\r\n      formData: {\r\n        name: '',\r\n        card: '',\r\n        selectArr: [],\r\n        region: '',\r\n        code: '',\r\n        depart: '',\r\n        destination: '',\r\n        departDate: '',\r\n        fromCity: '',\r\n        data: '',\r\n        fromCityValue: ''\r\n      },\r\n      pickerOptions: {\r\n        disabledDate: time => {\r\n          // 禁用今天之前的日期选择\r\n          return (\r\n            time.getTime() < new Date().getTime() - 24 * 60 * 60 * 1000 ||\r\n            time.getTime() > new Date().getTime() + 24 * 60 * 60 * 1000 * 7\r\n          )\r\n        }\r\n      },\r\n      userInfo: {},\r\n      loading: false,\r\n      fromacity: [\r\n        { label: '兰州市', value: '兰州市' },\r\n        { label: '嘉峪关市',value: '嘉峪关市' },\r\n        { label: '金昌市',value: '金昌市' },\r\n        { label: '酒泉市',value: '酒泉市' },\r\n        { label: '张掖市',value: '张掖市' },\r\n        { label: '武威市',value: '武威市' },\r\n        { label: '白银市',value: '白银市' },\r\n        { label: '天水市',value: '天水市' },\r\n        { label: '平凉市',value: '平凉市' },\r\n        { label: '庆阳市',value: '庆阳市' },\r\n        { label: '定西市',value: '定西市' },\r\n        { label: '陇南市',value: '陇南市' },\r\n        { label: '甘南藏族自治州',value: '甘南藏族自治州' },\r\n        { label: '临夏回族自治州',value: '临夏回族自治州' },\r\n        { label: '兰州新区', value: '兰州新区' },\r\n      ],\r\n      fromCityValue: '',\r\n      fromCityId: '',\r\n      tocolumns: [],\r\n      toCityValue: '',\r\n      data1: '',\r\n      rules: {\r\n        code: [\r\n          { required: true, message: '验证码不能为空', trigger: 'blur' },\r\n          { min: 4, max: 4, message: '验证码长度为4个字符', trigger: 'blur' },\r\n          { validator: checkCode, trigger: 'blur' }\r\n        ],\r\n        fromCityValue: [\r\n          { required: true, message: '请选择出发站点', trigger: 'blur' },\r\n        ],\r\n        departDate: [\r\n          { required: true, message: '请选择出发时间', trigger: 'blur' },\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    createCode()\r\n  },\r\n\r\n  methods: {\r\n    dataChange(val) {\r\n      console.log(val)\r\n      this.data1 = val\r\n    },\r\n    updateCode() {\r\n      createCode()\r\n    },\r\n    submitForm(formName) {\r\n      this.$router.push('/')\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          this.loading = true\r\n          const params = {\r\n            uid: '6202000027',\r\n            departcityid: this.fromCityId, // 出发城市id\r\n           // reachstationname: this.toCityValue, // 目的站名称、\r\n           reachstationname: this.state, // 目的站名称、\r\n            departdate: this.formData.departDate, // 出发日期\r\n            disable: '1',//是否查询不可售（0：只查询可售班次 1：查询所有班次 默认为0）\r\n            start: '1',\r\n            count: '5',\r\n          }\r\n          console.log('---上传数据 ----', params)\r\n          console.log('params', params)\r\n          serverApi.fromCity('findSailingsgs', 'gssztravelinquiry', params).then(res => {\r\n              this.loading = false\r\n            console.log('---asd---asd--asd---asd-', JSON.parse(res.data))\r\n              if (res.code == 200 && res.success && Number(JSON.parse(res.data).totalrows)-1 > 0) {\r\n                this.$router.push({\r\n                  name: 'Results',\r\n                  params: {\r\n                    data: JSON.stringify(res.data),\r\n                    departDate: this.formData.departDate,\r\n                    fromCityId: this.fromCityId,\r\n                    toCityValue: this.toCityValue\r\n                  }\r\n                })\r\n                // if () {\r\n                //   // this.$router.push({\r\n                //   //   name: 'Results',\r\n                //   //   params: {\r\n                //   //     data: JSON.stringify(res.data),\r\n                //   //     departDate: this.formData.departDate,\r\n                //   //     fromCityId: this.fromCityId,\r\n                //   //     toCityValue: this.toCityValue\r\n                //   //   }\r\n                //   // })\r\n                // } else {\r\n                //   this.$router.push('/no-results')\r\n                // }\r\n              } else {\r\n                this.$router.push('/no-results')\r\n              }\r\n            })\r\n            .catch(() => {\r\n              this.loading = false\r\n              this.$eleMessage({\r\n                type: 'info',\r\n                message: '网络异常，请稍后再试！',\r\n                custom: true,\r\n                showClose: true\r\n              })\r\n            })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n      createCode()\r\n    },\r\n    // 查询出发城市\r\n    async fromacityChange(fromCityValue) {\r\n      this.toCityValue = ''\r\n      this.tocolumns = []\r\n      this.state = ''\r\n      this.restaurants = []\r\n\r\n\r\n      console.log('---',fromCityValue)\r\n      try {\r\n        const params = {\r\n          uid: '6202000027',\r\n          returntype: '0',\r\n          provincecode: '62',\r\n          word: fromCityValue,\r\n        }\r\n        const fromCityResult = await serverApi.fromCity('departureCitygs', 'gssztravelinquiry', params)\r\n        const fromCityResultData = JSON.parse(fromCityResult.data)\r\n        console.log('---出发城市---', JSON.parse(fromCityResult.data).data)\r\n        if (fromCityResult.code === '200' && fromCityResultData.data) {\r\n          this.fromCityId = JSON.parse(fromCityResult.data).data[0].id\r\n\r\n          this.restaurants = await this.loadAll();\r\n          // 查询目的站名称\r\n          await this.queryToCity()\r\n        } else {\r\n          this.fromCityId = ''\r\n          this.$eleMessage({\r\n            type: 'info',\r\n            message: '暂无城市信息，亲切换出发城市再试！',\r\n          })\r\n        }\r\n      } catch (e) {\r\n        this.$eleMessage({\r\n          type: 'info',\r\n          message: '网络异常，请稍后再试！'\r\n        })\r\n      }\r\n    },\r\n    // 获取目的城市\r\n    async queryToCity() {\r\n      this.tocolumns = []\r\n      try {\r\n        const params = {\r\n          uid: '6202000027',\r\n          returntype: '0',\r\n          departcityid: this.fromCityId\r\n        }\r\n        const toCityResult = await serverApi.fromCity('arrivalStationgsJm', 'gssztravelinquiry', params)\r\n        const toCityResultData = JSON.parse(toCityResult.data)\r\n        console.log('----', JSON.parse(toCityResultData.data))\r\n        if (toCityResult.code === 'success' && toCityResult.success && JSON.parse(toCityResultData.data).totalrows >= '0') {\r\n          for (const item of JSON.parse(toCityResultData.data).reachstations) {\r\n            this.tocolumns.push({\r\n              label: item.name,\r\n              value: item.name\r\n            })\r\n          }\r\n        } else {\r\n          this.tocolumns = []\r\n          this.$eleMessage({\r\n            type: 'info',\r\n            message: '暂无城市信息，请稍后再试！',\r\n          })\r\n        }\r\n      } catch (e) {\r\n        console.log('----', e)\r\n        this.$eleMessage({\r\n          type: 'info',\r\n          message: '网络异常，请稍后再试！'\r\n        })\r\n      }\r\n    },\r\n    // 目的城市\r\n    selectToCityValue(ToCityValue) {\r\n      console.log('--目的城市--', ToCityValue)\r\n      this.toCityValue = ToCityValue\r\n    },\r\n    // 重置\r\n    resetForm(formName) {\r\n      createCode()\r\n      this.$refs[formName].resetFields()\r\n      this.fromCityValue = ''\r\n      this.toCityValue = ''\r\n      this.formData.departDate = ''\r\n      this.state = ''\r\n      sessionStorage.removeItem('pdfEntity')\r\n      this.$router.push('/')\r\n    },\r\n\r\n    async loadAll() {\r\n      const params = {\r\n        uid: '6202000027',\r\n        returntype: '0',\r\n        departcityid: this.fromCityId,\r\n      }\r\n      const toCityResult = await serverApi.fromCity('arrivalStationgsJm', 'gssztravelinquiry', params)\r\n      const toCityResultData = JSON.parse(toCityResult.data)\r\n      console.log('--asda12321312312--', JSON.parse(toCityResultData.data).reachstations)\r\n      let result = []\r\n\r\n      for(var item of JSON.parse(toCityResultData.data).reachstations) {\r\n        result.push({\r\n          value: item.name,\r\n          city: item.city\r\n        })\r\n      }\r\n      return result\r\n    },\r\n\r\n    async querySearchAsync(queryString, cb) {\r\n\r\n      const regtest = /^[a-zA-Z\\u4e00-\\u9fa5]+$/\r\n      if(!regtest.exec(queryString) && queryString != '') {\r\n        console.log('--queryString---', queryString)\r\n        this.$eleMessage({\r\n          type: 'info',\r\n          message: '请输入汉字和字母',\r\n        })\r\n        queryString = ''\r\n        this.state = ''\r\n        return\r\n      }\r\n\r\n      console.log('-----', queryString)\r\n      const params = {\r\n        uid: '6202000027',\r\n        returntype: '0',\r\n        departcityid: this.fromCityId,\r\n        word: queryString\r\n      }\r\n      const toCityResult = await serverApi.fromCity('arrivalStationgsJm', 'gssztravelinquiry', params)\r\n      const toCityResultData = JSON.parse(toCityResult.data)\r\n      // console.log('--asda12321312312--', JSON.parse(toCityResultData.data).reachstations)\r\n      let result = []\r\n      for(var item of JSON.parse(toCityResultData.data).reachstations) {\r\n        result.push({\r\n          value: item.name,\r\n          city: item.city\r\n        })\r\n      }\r\n      console.log('--asd-sa-d-asd-as-d-as', result)\r\n      const uniqueArr = result.filter((item, index, result) => { \r\n          return result.findIndex(t => t.value === item.value) === index; \r\n      });\r\n      console.log('-12312312312--', uniqueArr)\r\n      if(uniqueArr.length == '0') {\r\n        this.state = ''\r\n      }\r\n      this.restaurants = uniqueArr\r\n      var restaurants = this.restaurants;\r\n      var results = queryString ? restaurants.filter(this.createStateFilter(queryString)) : restaurants;\r\n\r\n      clearTimeout(this.timeout);\r\n      this.timeout = setTimeout(() => {\r\n        cb(results);\r\n      }, 3000 * Math.random());\r\n    },\r\n    createStateFilter(queryString) {\r\n      return (state) => {\r\n        return (state.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\r\n      };\r\n    },\r\n    handleSelect(item) {\r\n      console.log(item);\r\n      this.toCityValue = item.value\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n/deep/ .el-icon-date:before {\r\n  content: '';\r\n}\r\n\r\n/deep/ .el-input__inner {\r\n  height: 50px;\r\n  font-family: MicrosoftYaHei;\r\n  font-size: 16px;\r\n  font-weight: 400;\r\n  padding: 0 12px;\r\n}\r\n\r\n/deep/ .el-form-item__label {\r\n  line-height: 50px;\r\n  font-family: MicrosoftYaHei;\r\n  font-size: 16px;\r\n  color: #333333;\r\n  text-align: right;\r\n  font-weight: 400;\r\n}\r\n\r\n@media only screen and (max-width: 1980px) {\r\n  .slt {\r\n    width: 490px;\r\n  }\r\n\r\n  .ipt {\r\n    width: 340px;\r\n  }\r\n}\r\n\r\n@media only screen and (max-width: 765px) and (min-width: 365px) {\r\n  .slt {\r\n    width: 200px;\r\n  }\r\n\r\n  .ipt {\r\n    width: 80px;\r\n  }\r\n\r\n  /deep/ .el-form-item__label {\r\n    line-height: 0.9rem;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 768px) {\r\n  .slt {\r\n    width: 200px;\r\n  }\r\n\r\n  .ipt {\r\n    width: 80px;\r\n  }\r\n\r\n  .banner-content h1 {\r\n    margin-left: 16px;\r\n  }\r\n}\r\n\r\n.footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  flex-direction: column;\r\n\r\n  .footer_bottom {\r\n    margin: 0.2rem 0;\r\n    color: #666;\r\n    font-size: 16px;\r\n  }\r\n}\r\n\r\n#canvas {\r\n  cursor: pointer;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./IndexView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./IndexView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./IndexView.vue?vue&type=template&id=5179f296&scoped=true&\"\nimport script from \"./IndexView.vue?vue&type=script&lang=js&\"\nexport * from \"./IndexView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./IndexView.vue?vue&type=style&index=0&id=5179f296&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5179f296\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","_m","staticClass","directives","name","rawName","value","loading","expression","ref","attrs","formData","rules","staticStyle","on","$event","fromacityChange","fromCityValue","model","callback","$$v","$set","_l","fromacity","item","key","label","pickerOptions","dataChange","departDate","trim","querySearchAsync","handleSelect","state","nativeOn","type","indexOf","_k","keyCode","submitForm","code","updateCode","resetForm","staticRenderFns","_v","randomColor","r","Math","floor","random","g","b","createCode","show_num","canvas_width","document","getElementById","width","canvas_height","height","canvas","context","getContext","sCode","aCode","split","aLength","length","i","j","deg","txt","toLowerCase","x","y","font","translate","rotate","fillStyle","fillText","strokeStyle","beginPath","moveTo","lineTo","stroke","join","validateCode","inputCode","data","restaurants","timeout","card","selectArr","region","depart","destination","fromCity","disabledDate","time","userInfo","fromCityId","tocolumns","toCityValue","data1","required","message","trigger","min","max","validator","mounted","methods","console","uid","departcityid","reachstationname","departdate","disable","start","count","serverApi","params","catch","custom","showClose","returntype","provincecode","word","fromCityResult","fromCityResultData","queryToCity","toCityResult","toCityResultData","JSON","selectToCityValue","sessionStorage","loadAll","result","city","regtest","queryString","uniqueArr","results","clearTimeout","cb","createStateFilter","component"],"sourceRoot":""}