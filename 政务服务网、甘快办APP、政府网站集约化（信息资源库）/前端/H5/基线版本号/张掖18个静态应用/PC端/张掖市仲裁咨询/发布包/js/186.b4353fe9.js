"use strict";(self["webpackChunkxsecmcx"]=self["webpackChunkxsecmcx"]||[]).push([[186],{4186:function(t,e,a){a.r(e),a.d(e,{default:function(){return N}});var s=function(){var t=this,e=t._self._c;return e("section",{staticClass:"result-container"},[e("h2",{staticClass:"title"},[t._v("查询结果")]),e("div",{staticClass:"result"},[[t._l(t.resultsObj.dataList,(function(a,s){return e("table",{key:s},[e("tr",[e("td",{staticClass:"tab_bt"},[t._v("问题")]),e("td",[t._v(t._s(a.name||"暂无数据"))])]),e("tr",[e("td",{staticClass:"tab_bt"},[t._v("回答")]),e("td",{attrs:{colspan:"3"}},[t._v(t._s(a.hd||"暂无数据"))])])])})),e("div",{staticClass:"block"},[e("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页",background:"","hide-on-single-page":!0,layout:"prev, pager, next, jumper","page-size":t.params.pageSize,total:t.resultsObj.totalCount,"current-page":t.currentPage3},on:{"current-change":t.currentChange,"size-change":t.handleSizeChange,"update:currentPage":function(e){t.currentPage3=e},"update:current-page":function(e){t.currentPage3=e}}})],1)]],2)])},n=[],r=a(6265),i=a.n(r);const c={APP_ID:"cmsnzjk",httpRequestJpaas:"https://zwfw.gansu.gov.cn/jpaas-jags-server/interface/"},{httpRequestJpaas:u}=c,o="cmslistInfonzjk",p={createSignJpaas:function(t={}){return new Promise(((e,a)=>{i()({method:"post",url:`${u}createsign`,data:t}).then((function(t){if(t.data.success){const{sign:a}=t.data.data;e(a)}else a(t)})).catch((function(t){a(t)}))}))},getDataFromJpaas:function(t={}){return new Promise(((e,a)=>{i()({method:"post",url:`${u}gateway`,data:t}).then((function(t){if(200==t.data.code&&1==t.data.success){const s=JSON.parse(t.data.data);if(200==s.code)e(s);else{const e=JSON.parse(JSON.parse(t.data.data).data);a(e)}}else a(t)})).catch((function(t){a(t)}))}))},getData:function({columnId:t="",params:e={}}={}){const a=new URLSearchParams;return a.append("header","{}"),a.append("version","1.0"),a.append("charset","UTF-8"),a.append("origin","1"),a.append("timestamp",(new Date).getTime()),a.append("interface_id",o),a.append("app_id","cmsnzjk"),a.append("biz_content",JSON.stringify(Object.assign({columnId:t},e))),new Promise(((t,e)=>{p.createSignJpaas(a).then((t=>(a.append("sign",t),p.getDataFromJpaas(a)))).then((e=>{try{var a=JSON.parse(e);t("object"===typeof a&&a?JSON.parse(e):e)}catch(s){t(e)}})).catch((t=>{e(t)}))}))}};var l=p;const{getData:h}=l;var d={queryList(t){return h({columnId:"f7769be211f148138e044cc5cd06a1b4",params:t})}};function g(t){if(!t)return"";let e=t.substr(0,1);for(let a=0;a<t.length-1;a++)e+="*";return e}function m(t,e,a){if(!t&&e+a>=t.length)return"";const s=t.substring(0,e),n=t.substring(t.length-a,t.length);let r="";for(let i=0;i<t.length-a-e;i++)r+="*";return s+r+n}var f={name:"ResultsView",data(){return{formData:{},params:{pageSize:5,pageNum:1},resultsObj:{},currentPage3:1}},created(){this.formData=JSON.parse(this.$route.params.res),void 0===this.formData&&(this.formData={name:"",code:"",selectName:"",selectArr:[]}),this.selectResult(this.params)},beforeMount(){this.selectResult(this.params)},methods:{desensitizedName:g,desensitizedCommon:m,currentChange(t){this.params.pageNum=t,this.selectResult(this.params)},handleSizeChange(){this.params.pageNum=this.currentPage3,this.selectResult(this.params)},async selectResult(t){this.formData.name?this.formData.name&&(this.params.name=encodeURIComponent(JSON.stringify({type:2,content:this.formData.name.replace(/\s+/g,""),left:"",right:""}))):this.params={pageSize:5,pageNum:1};const e=this.$loading({text:"Loading...",spinner:"el-icon-loading",background:"rgba(255,255,255,0.9)",target:document.getElementById("resultDiag")});try{const e=await d.queryList(t);if("200"!==e.code||!e.success)throw new Error("查询失败");0===e.data.dataResult.dataList.length?this.$router.push("/index/no-results"):(this.resultsObj=e.data.dataResult,this.$forceUpdate())}catch(a){this.$message({type:"error",message:"查询失败，请重试或联系管理员"}),this.$router.push({name:"Index"})}e.close()}},watch:{$route(){this.params={pageNum:1,pageSize:5},this.currentPage3=1,this.formData=JSON.parse(this.$route.params.res),this.selectResult(this.params)}}},b=f,v=a(1001),S=(0,v.Z)(b,s,n,!1,null,"0ddf98ea",null),N=S.exports}}]);