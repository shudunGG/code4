"use strict";(self["webpackChunkxsecmcx"]=self["webpackChunkxsecmcx"]||[]).push([[599],{2599:function(t,e,s){s.r(e),s.d(e,{default:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("section",{staticClass:"result-container"},[e("h2",{staticClass:"title"},[t._v("查询结果")]),e("div",{staticClass:"result"},[t._l(t.tjrylb,(function(s,a){return e("table",{key:a},[e("tr",[e("td",{staticClass:"tab_bt"},[t._v("姓名")]),e("td",[t._v(t._s(t.name(t.info.name)||"暂无数据"))]),e("td",{staticClass:"tab_bt"},[t._v("性别")]),e("td",[t._v(t._s("1"===t.info.sex?"男":"女"))])]),e("tr",[e("td",{staticClass:"tab_bt"},[t._v("电话号码")]),e("td",[t._v(t._s(t.phone(t.info.mobile)||"暂无数据"))]),e("td",{staticClass:"tab_bt"},[t._v("体检日期")]),e("td",[t._v(t._s(s.reportTime||"暂无数据"))])]),e("tr",[e("td",{staticClass:"tab_bt"},[t._v("报告预览")]),e("td",{staticStyle:{cursor:"pointer",color:"#3f87f3"},attrs:{colspan:"3"},on:{click:function(e){return t.pdfView(s.reportPath)}}},[t._v("点击预览")])])])}))],2)])},n=[];function r(t){return t?2===t.length||3===t.length?t.replace(/^./,"*"):t.length<=6&&t.length>=3?t.replace(t.substr(0,t.length-2),"***"):t.length>6?t.replace(/^(.).*(.)$/,"$1*****$2"):void 0:"无"}function i(t){return t?11===t.length?t.substring(0,3)+"******"+t.substring(9,11):8===t.length?t.substring(0,2)+"****"+t.substring(6,8):9===t.length?t.substring(0,2)+"****"+t.substring(6,9):t.substring(0,3)+"****"+t.substring(8,11):"无"}var o=s(683),c={name:"ResultsView",data(){return{tjrylb:{},info:{}}},async mounted(){this.info=this.$store.state.drResultData,this.tjrylb=this.$store.state.drResultData.reports.sort(((t,e)=>new Date(e.reportTime)-new Date(t.reportTime))),this.tjrylb},methods:{name:r,phone:i,async fileBase(){const t={downloadMaterialUrl:this.tjrylb.httppdf};try{const e=await o.A.queryList("zyyy","download",t,{});if("200"!==e.code||!e.success||""===e.data.data)return void this.$message({message:"暂无报告数据，请稍后再试",duration:2e3});{const t=this.base64toBlod(e.data.data);this.pdfSrc=URL.createObjectURL(t),this.pdfSrc}}catch(e){return void this.$message({message:"网络异常，请稍后再试",duration:2e3})}},async pdfView(t){const e=document.createElement("a");e.href=t,e.target="_blank",e.click()},downLoadPdf(t){const e=document.createElement("a");e.download="体检报告",e.href=t,e.click()},base64toBlod(t){t=t.replace(/[\n\r]/g,"");const e=window.atob(t),s=e.length,a=new Uint8Array(s);for(let n=0;n<s;++n)a[n]=e.charCodeAt(n);return new Blob([a],{type:"application/pdf"})}}},l=c,d=s(1656),u=(0,d.A)(l,a,n,!1,null,"d0dedc5a",null),h=u.exports}}]);