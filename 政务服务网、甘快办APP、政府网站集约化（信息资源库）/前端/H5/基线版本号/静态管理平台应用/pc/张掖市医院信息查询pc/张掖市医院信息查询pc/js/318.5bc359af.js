(self["webpackChunkxsecmcx"]=self["webpackChunkxsecmcx"]||[]).push([[318],{2318:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return x}});var r=function(){var t=this,e=t._self._c;return e("section",{staticClass:"result-container"},[e("h2",{staticClass:"title"},[t._v("查询结果")]),e("div",{staticClass:"result"},[[t._l(t.resultsObj.dataList,(function(i,r){return e("table",{key:r},[e("tr",[e("td",{staticClass:"tab_bt"},[t._v("医疗机构名称")]),e("td",[t._v(t._s(i.name||"暂无数据"))]),e("td",{staticClass:"tab_bt"},[t._v("楼层")]),e("td",[t._v(t._s(i.lc||"暂无数据"))])]),e("tr",[e("td",{staticClass:"tab_bt"},[t._v("科室")]),e("td",[t._v(t._s(i.ks||"暂无数据"))]),e("td",{staticClass:"tab_bt"},[t._v("电话")]),e("td",[t._v(t._s("无"===i.dh?"暂无数据":i.dh||"暂无数据"))])])])})),e("div",{staticClass:"block"},[e("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页",background:"","hide-on-single-page":!0,layout:"prev, pager, next, jumper","page-size":5,total:t.resultsObj.totalCount,"current-page":t.currentPage3},on:{"current-change":t.currentChange,"size-change":t.handleSizeChange,"update:currentPage":function(e){t.currentPage3=e},"update:current-page":function(e){t.currentPage3=e}}})],1)]],2)])},s=[],n=i(6265),o=i.n(n);const h={APP_ID:"cmsnzjk",httpRequestJpaas:"https://zwfw.gansu.gov.cn/jpaas-jags-server/interface/"},{httpRequestJpaas:u}=h,a="jsd-data-convert-cms",c=JSON.stringify({"res-key":"cB19NJKc","key-secret":"65BEA899052D3FB83D39C89FCAAADC39CC1531870DCE125A577CD3299C2EED2E"}),l={createSignJpaas:function(t={}){return new Promise(((e,i)=>{o()({method:"post",url:`${u}createsign`,data:t}).then((function(t){if(t.data.success){const{sign:i}=t.data.data;e(i)}else i(t)})).catch((function(t){i(t)}))}))},getDataFromJpaas:function(t={}){return new Promise(((e,i)=>{o()({method:"post",url:`${u}gateway`,data:t}).then((function(t){if(200==t.data.code&&1==t.data.success){const r=JSON.parse(t.data.data);if(200==r.code)e(r);else{const e=JSON.parse(JSON.parse(t.data.data).data);i(e)}}else i(t)})).catch((function(t){i(t)}))}))},getData:function({columnId:t="",params:e={}}={}){const i=new URLSearchParams;return i.append("version","1.0"),i.append("charset","UTF-8"),i.append("origin","1"),i.append("timestamp",(new Date).getTime()),i.append("interface_id",a),i.append("header",c),i.append("app_id","cmsnzjk"),i.append("biz_content",JSON.stringify(Object.assign({columnId:t},e))),new Promise(((t,e)=>{l.createSignJpaas(i).then((t=>(i.append("sign",t),l.getDataFromJpaas(i)))).then((e=>{try{var i=JSON.parse(e);t("object"===typeof i&&i?JSON.parse(e):e)}catch(r){t(e)}})).catch((t=>{e(t)}))}))}};var f=l;const p=i(2346).sm2,g=1;var d={encrypt(t,e){e=e||"04f3de3a64bdc63c18d8bef95512835e69bedaf0e1089da91637790f45114a20cd1100dcb8da5207e4c1fe43e03a8c93033cac262ceb57ae2b86c6a4d7109df845";const i=p.doEncrypt(t,e,g);return"04"+i},decrypt(t,e){e=e||"009b49c2685632742b544ce47212ec427920db9234d77f966f92e3cbddc855b016";const i=p.doDecrypt(t.slice(2),e,g);return i}};const{getData:m}=f;var y={queryList(t){return m({columnId:d.encrypt("e0b44d05cff2405bb8db2d5c086e88bf"),params:t})}};function v(t){if(!t)return"";let e=t.substr(0,1);for(let i=0;i<t.length-1;i++)e+="*";return e}function b(t,e,i){if(!t&&e+i>=t.length)return"";const r=t.substring(0,e),s=t.substring(t.length-i,t.length);let n="";for(let o=0;o<t.length-i-e;o++)n+="*";return r+n+s}var T={name:"ResultsView",data(){return{formData:{},params:{pageSize:5,pageNum:1},list:[],resultsObj:{},currentPage3:1}},created(){this.formData=this.$route.params.res?JSON.parse(this.$route.params.res):void 0,void 0===this.formData&&(this.formData={name:"",code:"",selectName:"",selectArr:[]}),this.params.pageNum=1,this.params.pageSize=5,this.selectResult()},beforeMount(){this.params.pageNum=1,this.selectResult()},methods:{desensitizedName:v,desensitizedCommon:b,currentChange(t){this.params.pageNum=t,this.selectResult()},handleSizeChange(){this.params.pageNum=this.currentPage3,this.selectResult()},async selectResult(){this.formData.name?this.params={pageNum:d.encrypt(this.params.pageNum),pageSize:d.encrypt("5"),map:d.encrypt(JSON.stringify({name:JSON.stringify({type:2,content:this.formData.name.replace(/\s+/g,""),left:"",right:""})}))}:this.params={pageNum:d.encrypt(this.params.pageNum),pageSize:d.encrypt("5"),queryType:"WILDCARD_QUERY"};const t=this.$loading({text:"Loading...",spinner:"el-icon-loading",background:"rgba(255,255,255,0.9)",target:document.getElementById("resultDiag")});try{const e=await y.queryList(this.params);if("200"!==e.code||!e.success)throw new Error("查询失败");if(this.list=JSON.parse(d.decrypt(e.data.dataResult)),0!==this.list.dataList.length)return this.resultsObj=this.list,this.$forceUpdate(),void t.close();this.$router.push("/index/no-results")}catch(e){this.$message({type:"error",message:"查询失败，请重试或联系管理员"}),this.$router.push({name:"Index"})}t.close()}},watch:{$route(){this.params={pageNum:1,pageSize:5,queryType:"WILDCARD_QUERY"},this.currentPage3=1,this.formData=JSON.parse(this.$route.params.res),this.selectResult(this.params)}}},w=T,F=i(1001),B=(0,F.Z)(w,r,s,!1,null,"4094db70",null),x=B.exports},2237:function(t,e){(function(){var e,i=0xdeadbeefcafe,r=15715070==(16777215&i);function s(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function n(){return new s(null)}function o(t,e,i,r,s,n){while(--n>=0){var o=e*this[t++]+i[r]+s;s=Math.floor(o/67108864),i[r++]=67108863&o}return s}function h(t,e,i,r,s,n){var o=32767&e,h=e>>15;while(--n>=0){var u=32767&this[t],a=this[t++]>>15,c=h*u+a*o;u=o*u+((32767&c)<<15)+i[r]+(1073741823&s),s=(u>>>30)+(c>>>15)+h*a+(s>>>30),i[r++]=1073741823&u}return s}function u(t,e,i,r,s,n){var o=16383&e,h=e>>14;while(--n>=0){var u=16383&this[t],a=this[t++]>>14,c=h*u+a*o;u=o*u+((16383&c)<<14)+i[r]+s,s=(u>>28)+(c>>14)+h*a,i[r++]=268435455&u}return s}var a="undefined"!==typeof navigator;a&&r&&"Microsoft Internet Explorer"==navigator.appName?(s.prototype.am=h,e=30):a&&r&&"Netscape"!=navigator.appName?(s.prototype.am=o,e=26):(s.prototype.am=u,e=28),s.prototype.DB=e,s.prototype.DM=(1<<e)-1,s.prototype.DV=1<<e;var c=52;s.prototype.FV=Math.pow(2,c),s.prototype.F1=c-e,s.prototype.F2=2*e-c;var l,f,p="0123456789abcdefghijklmnopqrstuvwxyz",g=new Array;for(l="0".charCodeAt(0),f=0;f<=9;++f)g[l++]=f;for(l="a".charCodeAt(0),f=10;f<36;++f)g[l++]=f;for(l="A".charCodeAt(0),f=10;f<36;++f)g[l++]=f;function d(t){return p.charAt(t)}function m(t,e){var i=g[t.charCodeAt(e)];return null==i?-1:i}function y(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function v(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function b(t){var e=n();return e.fromInt(t),e}function T(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;var r=t.length,n=!1,o=0;while(--r>=0){var h=8==i?255&t[r]:m(t,r);h<0?"-"==t.charAt(r)&&(n=!0):(n=!1,0==o?this[this.t++]=h:o+i>this.DB?(this[this.t-1]|=(h&(1<<this.DB-o)-1)<<o,this[this.t++]=h>>this.DB-o):this[this.t-1]|=h<<o,o+=i,o>=this.DB&&(o-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),n&&s.ZERO.subTo(this,this)}function w(){var t=this.s&this.DM;while(this.t>0&&this[this.t-1]==t)--this.t}function F(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,r=(1<<e)-1,s=!1,n="",o=this.t,h=this.DB-o*this.DB%e;if(o-- >0){h<this.DB&&(i=this[o]>>h)>0&&(s=!0,n=d(i));while(o>=0)h<e?(i=(this[o]&(1<<h)-1)<<e-h,i|=this[--o]>>(h+=this.DB-e)):(i=this[o]>>(h-=e)&r,h<=0&&(h+=this.DB,--o)),i>0&&(s=!0),s&&(n+=d(i))}return s?n:"0"}function B(){var t=n();return s.ZERO.subTo(this,t),t}function x(){return this.s<0?this.negate():this}function S(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(e=i-t.t,0!=e)return this.s<0?-e:e;while(--i>=0)if(0!=(e=this[i]-t[i]))return e;return 0}function D(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function I(){return this.t<=0?0:this.DB*(this.t-1)+D(this[this.t-1]^this.s&this.DM)}function E(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function A(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function q(t,e){var i,r=t%this.DB,s=this.DB-r,n=(1<<s)-1,o=Math.floor(t/this.DB),h=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)e[i+o+1]=this[i]>>s|h,h=(this[i]&n)<<r;for(i=o-1;i>=0;--i)e[i]=0;e[o]=h,e.t=this.t+o+1,e.s=this.s,e.clamp()}function O(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var r=t%this.DB,s=this.DB-r,n=(1<<r)-1;e[0]=this[i]>>r;for(var o=i+1;o<this.t;++o)e[o-i-1]|=(this[o]&n)<<s,e[o-i]=this[o]>>r;r>0&&(e[this.t-i-1]|=(this.s&n)<<s),e.t=this.t-i,e.clamp()}}function R(t,e){var i=0,r=0,s=Math.min(t.t,this.t);while(i<s)r+=this[i]-t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){r-=t.s;while(i<this.t)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(i<t.t)r-=t[i],e[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[i++]=this.DV+r:r>0&&(e[i++]=r),e.t=i,e.clamp()}function C(t,e){var i=this.abs(),r=t.abs(),n=i.t;e.t=n+r.t;while(--n>=0)e[n]=0;for(n=0;n<r.t;++n)e[n+i.t]=i.am(0,r[n],e,n,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&s.ZERO.subTo(e,e)}function k(t){var e=this.abs(),i=t.t=2*e.t;while(--i>=0)t[i]=0;for(i=0;i<e.t-1;++i){var r=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function N(t,e,i){var r=t.abs();if(!(r.t<=0)){var o=this.abs();if(o.t<r.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var h=n(),u=this.s,a=t.s,c=this.DB-D(r[r.t-1]);c>0?(r.lShiftTo(c,h),o.lShiftTo(c,i)):(r.copyTo(h),o.copyTo(i));var l=h.t,f=h[l-1];if(0!=f){var p=f*(1<<this.F1)+(l>1?h[l-2]>>this.F2:0),g=this.FV/p,d=(1<<this.F1)/p,m=1<<this.F2,y=i.t,v=y-l,b=null==e?n():e;h.dlShiftTo(v,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),s.ONE.dlShiftTo(l,b),b.subTo(h,h);while(h.t<l)h[h.t++]=0;while(--v>=0){var T=i[--y]==f?this.DM:Math.floor(i[y]*g+(i[y-1]+m)*d);if((i[y]+=h.am(0,T,i,v,0,l))<T){h.dlShiftTo(v,b),i.subTo(b,i);while(i[y]<--T)i.subTo(b,i)}}null!=e&&(i.drShiftTo(l,e),u!=a&&s.ZERO.subTo(e,e)),i.t=l,i.clamp(),c>0&&i.rShiftTo(c,i),u<0&&s.ZERO.subTo(i,i)}}}function V(t){var e=n();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(s.ZERO)>0&&t.subTo(e,e),e}function _(t){this.m=t}function M(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function L(t){return t}function P(t){t.divRemTo(this.m,null,t)}function z(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function H(t,e){t.squareTo(e),this.reduce(e)}function U(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function j(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function Z(t){var e=n();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(s.ZERO)>0&&this.m.subTo(e,e),e}function X(t){var e=n();return t.copyTo(e),this.reduce(e),e}function J(t){while(t.t<=this.mt2)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],r=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;i=e+this.m.t,t[i]+=this.m.am(0,r,t,e,0,this.m.t);while(t[i]>=t.DV)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function K(t,e){t.squareTo(e),this.reduce(e)}function $(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function G(){return 0==(this.t>0?1&this[0]:this.s)}function Y(t,e){if(t>4294967295||t<1)return s.ONE;var i=n(),r=n(),o=e.convert(this),h=D(t)-1;o.copyTo(i);while(--h>=0)if(e.sqrTo(i,r),(t&1<<h)>0)e.mulTo(r,o,i);else{var u=i;i=r,r=u}return e.revert(i)}function W(t,e){var i;return i=t<256||e.isEven()?new _(e):new j(e),this.exp(t,i)}function Q(){var t=n();return this.copyTo(t),t}function tt(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function et(){return 0==this.t?this.s:this[0]<<24>>24}function it(){return 0==this.t?this.s:this[0]<<16>>16}function rt(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function st(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function nt(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),r=b(i),s=n(),o=n(),h="";this.divRemTo(r,s,o);while(s.signum()>0)h=(i+o.intValue()).toString(t).substr(1)+h,s.divRemTo(r,s,o);return o.intValue().toString(t)+h}function ot(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),r=Math.pow(e,i),n=!1,o=0,h=0,u=0;u<t.length;++u){var a=m(t,u);a<0?"-"==t.charAt(u)&&0==this.signum()&&(n=!0):(h=e*h+a,++o>=i&&(this.dMultiply(r),this.dAddOffset(h,0),o=0,h=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(h,0)),n&&s.ZERO.subTo(this,this)}function ht(t,e,i){if("number"==typeof e)if(t<2)this.fromInt(1);else{this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(s.ONE.shiftLeft(t-1),dt,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(e))this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(s.ONE.shiftLeft(t-1),this)}else{var r=new Array,n=7&t;r.length=1+(t>>3),e.nextBytes(r),n>0?r[0]&=(1<<n)-1:r[0]=0,this.fromString(r,256)}}function ut(){var t=this.t,e=new Array;e[0]=this.s;var i,r=this.DB-t*this.DB%8,s=0;if(t-- >0){r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[s++]=i|this.s<<this.DB-r);while(t>=0)r<8?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==s&&(128&this.s)!=(128&i)&&++s,(s>0||i!=this.s)&&(e[s++]=i)}return e}function at(t){return 0==this.compareTo(t)}function ct(t){return this.compareTo(t)<0?this:t}function lt(t){return this.compareTo(t)>0?this:t}function ft(t,e,i){var r,s,n=Math.min(t.t,this.t);for(r=0;r<n;++r)i[r]=e(this[r],t[r]);if(t.t<this.t){for(s=t.s&this.DM,r=n;r<this.t;++r)i[r]=e(this[r],s);i.t=this.t}else{for(s=this.s&this.DM,r=n;r<t.t;++r)i[r]=e(s,t[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function pt(t,e){return t&e}function gt(t){var e=n();return this.bitwiseTo(t,pt,e),e}function dt(t,e){return t|e}function mt(t){var e=n();return this.bitwiseTo(t,dt,e),e}function yt(t,e){return t^e}function vt(t){var e=n();return this.bitwiseTo(t,yt,e),e}function bt(t,e){return t&~e}function Tt(t){var e=n();return this.bitwiseTo(t,bt,e),e}function wt(){for(var t=n(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function Ft(t){var e=n();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Bt(t){var e=n();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function xt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function St(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+xt(this[t]);return this.s<0?this.t*this.DB:-1}function Dt(t){var e=0;while(0!=t)t&=t-1,++e;return e}function It(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=Dt(this[i]^e);return t}function Et(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function At(t,e){var i=s.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i}function qt(t){return this.changeBit(t,dt)}function Ot(t){return this.changeBit(t,bt)}function Rt(t){return this.changeBit(t,yt)}function Ct(t,e){var i=0,r=0,s=Math.min(t.t,this.t);while(i<s)r+=this[i]+t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){r+=t.s;while(i<this.t)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(i<t.t)r+=t[i],e[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[i++]=r:r<-1&&(e[i++]=this.DV+r),e.t=i,e.clamp()}function kt(t){var e=n();return this.addTo(t,e),e}function Nt(t){var e=n();return this.subTo(t,e),e}function Vt(t){var e=n();return this.multiplyTo(t,e),e}function _t(){var t=n();return this.squareTo(t),t}function Mt(t){var e=n();return this.divRemTo(t,e,null),e}function Lt(t){var e=n();return this.divRemTo(t,null,e),e}function Pt(t){var e=n(),i=n();return this.divRemTo(t,e,i),new Array(e,i)}function zt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Ht(t,e){if(0!=t){while(this.t<=e)this[this.t++]=0;this[e]+=t;while(this[e]>=this.DV)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Ut(){}function jt(t){return t}function Zt(t,e,i){t.multiplyTo(e,i)}function Xt(t,e){t.squareTo(e)}function Jt(t){return this.exp(t,new Ut)}function Kt(t,e,i){var r,s=Math.min(this.t+t.t,e);i.s=0,i.t=s;while(s>0)i[--s]=0;for(r=i.t-this.t;s<r;++s)i[s+this.t]=this.am(0,t[s],i,s,0,this.t);for(r=Math.min(t.t,e);s<r;++s)this.am(0,t[s],i,s,0,e-s);i.clamp()}function $t(t,e,i){--e;var r=i.t=this.t+t.t-e;i.s=0;while(--r>=0)i[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)i[this.t+r-e]=this.am(e-r,t[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)}function Gt(t){this.r2=n(),this.q3=n(),s.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Yt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=n();return t.copyTo(e),this.reduce(e),e}function Wt(t){return t}function Qt(t){t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(t.compareTo(this.r2)<0)t.dAddOffset(1,this.m.t+1);t.subTo(this.r2,t);while(t.compareTo(this.m)>=0)t.subTo(this.m,t)}function te(t,e){t.squareTo(e),this.reduce(e)}function ee(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function ie(t,e){var i,r,s=t.bitLength(),o=b(1);if(s<=0)return o;i=s<18?1:s<48?3:s<144?4:s<768?5:6,r=s<8?new _(e):e.isEven()?new Gt(e):new j(e);var h=new Array,u=3,a=i-1,c=(1<<i)-1;if(h[1]=r.convert(this),i>1){var l=n();r.sqrTo(h[1],l);while(u<=c)h[u]=n(),r.mulTo(l,h[u-2],h[u]),u+=2}var f,p,g=t.t-1,d=!0,m=n();s=D(t[g])-1;while(g>=0){s>=a?f=t[g]>>s-a&c:(f=(t[g]&(1<<s+1)-1)<<a-s,g>0&&(f|=t[g-1]>>this.DB+s-a)),u=i;while(0==(1&f))f>>=1,--u;if((s-=u)<0&&(s+=this.DB,--g),d)h[f].copyTo(o),d=!1;else{while(u>1)r.sqrTo(o,m),r.sqrTo(m,o),u-=2;u>0?r.sqrTo(o,m):(p=o,o=m,m=p),r.mulTo(m,h[f],o)}while(g>=0&&0==(t[g]&1<<s))r.sqrTo(o,m),p=o,o=m,m=p,--s<0&&(s=this.DB-1,--g)}return r.revert(o)}function re(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var r=e;e=i,i=r}var s=e.getLowestSetBit(),n=i.getLowestSetBit();if(n<0)return e;s<n&&(n=s),n>0&&(e.rShiftTo(n,e),i.rShiftTo(n,i));while(e.signum()>0)(s=e.getLowestSetBit())>0&&e.rShiftTo(s,e),(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return n>0&&i.lShiftTo(n,i),i}function se(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this[r])%t;return i}function ne(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return s.ZERO;var i=t.clone(),r=this.clone(),n=b(1),o=b(0),h=b(0),u=b(1);while(0!=i.signum()){while(i.isEven())i.rShiftTo(1,i),e?(n.isEven()&&o.isEven()||(n.addTo(this,n),o.subTo(t,o)),n.rShiftTo(1,n)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);while(r.isEven())r.rShiftTo(1,r),e?(h.isEven()&&u.isEven()||(h.addTo(this,h),u.subTo(t,u)),h.rShiftTo(1,h)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);i.compareTo(r)>=0?(i.subTo(r,i),e&&n.subTo(h,n),o.subTo(u,o)):(r.subTo(i,r),e&&h.subTo(n,h),u.subTo(o,u))}return 0!=r.compareTo(s.ONE)?s.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}_.prototype.convert=M,_.prototype.revert=L,_.prototype.reduce=P,_.prototype.mulTo=z,_.prototype.sqrTo=H,j.prototype.convert=Z,j.prototype.revert=X,j.prototype.reduce=J,j.prototype.mulTo=$,j.prototype.sqrTo=K,s.prototype.copyTo=y,s.prototype.fromInt=v,s.prototype.fromString=T,s.prototype.clamp=w,s.prototype.dlShiftTo=E,s.prototype.drShiftTo=A,s.prototype.lShiftTo=q,s.prototype.rShiftTo=O,s.prototype.subTo=R,s.prototype.multiplyTo=C,s.prototype.squareTo=k,s.prototype.divRemTo=N,s.prototype.invDigit=U,s.prototype.isEven=G,s.prototype.exp=Y,s.prototype.toString=F,s.prototype.negate=B,s.prototype.abs=x,s.prototype.compareTo=S,s.prototype.bitLength=I,s.prototype.mod=V,s.prototype.modPowInt=W,s.ZERO=b(0),s.ONE=b(1),Ut.prototype.convert=jt,Ut.prototype.revert=jt,Ut.prototype.mulTo=Zt,Ut.prototype.sqrTo=Xt,Gt.prototype.convert=Yt,Gt.prototype.revert=Wt,Gt.prototype.reduce=Qt,Gt.prototype.mulTo=ee,Gt.prototype.sqrTo=te;var oe,he,ue,ae=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ce=(1<<26)/ae[ae.length-1];function le(t){var e,i=this.abs();if(1==i.t&&i[0]<=ae[ae.length-1]){for(e=0;e<ae.length;++e)if(i[0]==ae[e])return!0;return!1}if(i.isEven())return!1;e=1;while(e<ae.length){var r=ae[e],s=e+1;while(s<ae.length&&r<ce)r*=ae[s++];r=i.modInt(r);while(e<s)if(r%ae[e++]==0)return!1}return i.millerRabin(t)}function fe(t){var e=this.subtract(s.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var r=e.shiftRight(i);t=t+1>>1,t>ae.length&&(t=ae.length);for(var o=n(),h=0;h<t;++h){o.fromInt(ae[Math.floor(Math.random()*ae.length)]);var u=o.modPow(r,this);if(0!=u.compareTo(s.ONE)&&0!=u.compareTo(e)){var a=1;while(a++<i&&0!=u.compareTo(e))if(u=u.modPowInt(2,this),0==u.compareTo(s.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0}function pe(t){he[ue++]^=255&t,he[ue++]^=t>>8&255,he[ue++]^=t>>16&255,he[ue++]^=t>>24&255,ue>=Se&&(ue-=Se)}function ge(){pe((new Date).getTime())}if(s.prototype.chunkSize=rt,s.prototype.toRadix=nt,s.prototype.fromRadix=ot,s.prototype.fromNumber=ht,s.prototype.bitwiseTo=ft,s.prototype.changeBit=At,s.prototype.addTo=Ct,s.prototype.dMultiply=zt,s.prototype.dAddOffset=Ht,s.prototype.multiplyLowerTo=Kt,s.prototype.multiplyUpperTo=$t,s.prototype.modInt=se,s.prototype.millerRabin=fe,s.prototype.clone=Q,s.prototype.intValue=tt,s.prototype.byteValue=et,s.prototype.shortValue=it,s.prototype.signum=st,s.prototype.toByteArray=ut,s.prototype.equals=at,s.prototype.min=ct,s.prototype.max=lt,s.prototype.and=gt,s.prototype.or=mt,s.prototype.xor=vt,s.prototype.andNot=Tt,s.prototype.not=wt,s.prototype.shiftLeft=Ft,s.prototype.shiftRight=Bt,s.prototype.getLowestSetBit=St,s.prototype.bitCount=It,s.prototype.testBit=Et,s.prototype.setBit=qt,s.prototype.clearBit=Ot,s.prototype.flipBit=Rt,s.prototype.add=kt,s.prototype.subtract=Nt,s.prototype.multiply=Vt,s.prototype.divide=Mt,s.prototype.remainder=Lt,s.prototype.divideAndRemainder=Pt,s.prototype.modPow=ie,s.prototype.modInverse=ne,s.prototype.pow=Jt,s.prototype.gcd=re,s.prototype.isProbablePrime=le,s.prototype.square=_t,s.prototype.Barrett=Gt,null==he){var de;if(he=new Array,ue=0,"undefined"!==typeof window&&window.crypto)if(window.crypto.getRandomValues){var me=new Uint8Array(32);for(window.crypto.getRandomValues(me),de=0;de<32;++de)he[ue++]=me[de]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var ye=window.crypto.random(32);for(de=0;de<ye.length;++de)he[ue++]=255&ye.charCodeAt(de)}while(ue<Se)de=Math.floor(65536*Math.random()),he[ue++]=de>>>8,he[ue++]=255&de;ue=0,ge()}function ve(){if(null==oe){for(ge(),oe=xe(),oe.init(he),ue=0;ue<he.length;++ue)he[ue]=0;ue=0}return oe.next()}function be(t){var e;for(e=0;e<t.length;++e)t[e]=ve()}function Te(){}function we(){this.i=0,this.j=0,this.S=new Array}function Fe(t){var e,i,r;for(e=0;e<256;++e)this.S[e]=e;for(i=0,e=0;e<256;++e)i=i+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[i],this.S[i]=r;this.i=0,this.j=0}function Be(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}function xe(){return new we}Te.prototype.nextBytes=be,we.prototype.init=Fe,we.prototype.next=Be;var Se=256;t.exports={default:s,BigInteger:s,SecureRandom:Te}}).call(this)},2346:function(t,e,i){t.exports={sm2:i(3953),sm3:i(2771),sm4:i(1895)}},181:function(t,e,i){const{BigInteger:r}=i(2237);function s(t){let e=t.toString(16);if("-"!==e.substr(0,1))e.length%2===1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{const i=e.substr(1);let s=i.length;s%2===1?s+=1:e.match(/^[0-7]/)||(s+=2);let n="";for(let t=0;t<s;t++)n+="f";const o=new r(n,16),h=o.xor(t).add(r.ONE);e=h.toString(16).replace(/^-/,"")}return e}class n{constructor(){this.isModified=!0,this.hTLV=null,this.hT="00",this.hL="00",this.hV=""}getLengthHexFromValue(){const t=this.hV.length/2;let e=t.toString(16);if(e.length%2===1&&(e="0"+e),t<128)return e;{const t=e.length/2,i=128+t;return i.toString(16)+e}}getEncodedHex(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV}getFreshValueHex(){return""}}class o extends n{constructor(t){super(),this.hT="02",t&&t.bigint&&(this.hTLV=null,this.isModified=!0,this.hV=s(t.bigint))}getFreshValueHex(){return this.hV}}class h extends n{constructor(t){super(),this.hT="30",this.asn1Array=[],t&&t.array&&(this.asn1Array=t.array)}getFreshValueHex(){let t="";for(let e=0;e<this.asn1Array.length;e++){const i=this.asn1Array[e];t+=i.getEncodedHex()}return this.hV=t,this.hV}}function u(t,e){if("8"!==t.substring(e+2,e+3))return 1;const i=parseInt(t.substring(e+3,e+4),10);return 0===i?-1:i>0&&i<10?i+1:-2}function a(t,e){const i=u(t,e);return i<1?"":t.substring(e+2,e+2+2*i)}function c(t,e){const i=a(t,e);if(""===i)return-1;let s;return s=parseInt(i.substring(0,1),10)<8?new r(i,16):new r(i.substring(2),16),s.intValue()}function l(t,e){const i=u(t,e);return i<0?i:e+2*(i+1)}function f(t,e){const i=l(t,e),r=c(t,e);return t.substring(i,i+2*r)}function p(t,e){const i=l(t,e),r=c(t,e);return i+2*r}function g(t,e){const i=[],r=l(t,e);i.push(r);const s=c(t,e);let n=r,o=0;for(;;){const e=p(t,n);if(null==e||e-r>=2*s)break;if(o>=200)break;i.push(e),n=e,o++}return i}t.exports={encodeDer(t,e){const i=new o({bigint:t}),r=new o({bigint:e}),s=new h({array:[i,r]});return s.getEncodedHex()},decodeDer(t){const e=g(t,0),i=e[0],s=e[1],n=f(t,i),o=f(t,s),h=new r(n,16),u=new r(o,16);return{r:h,s:u}}}},6596:function(t,e,i){const{BigInteger:r}=i(2237),s=new r("3");class n{constructor(t,e){this.x=e,this.q=t}equals(t){return t===this||this.q.equals(t.q)&&this.x.equals(t.x)}toBigInteger(){return this.x}negate(){return new n(this.q,this.x.negate().mod(this.q))}add(t){return new n(this.q,this.x.add(t.toBigInteger()).mod(this.q))}subtract(t){return new n(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))}multiply(t){return new n(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))}divide(t){return new n(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))}square(){return new n(this.q,this.x.square().mod(this.q))}}class o{constructor(t,e,i,s){this.curve=t,this.x=e,this.y=i,this.z=null==s?r.ONE:s,this.zinv=null}getX(){return null===this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}getY(){return null===this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}equals(t){if(t===this)return!0;if(this.isInfinity())return t.isInfinity();if(t.isInfinity())return this.isInfinity();const e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q);if(!e.equals(r.ZERO))return!1;const i=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);return i.equals(r.ZERO)}isInfinity(){return null===this.x&&null===this.y||this.z.equals(r.ZERO)&&!this.y.toBigInteger().equals(r.ZERO)}negate(){return new o(this.curve,this.x,this.y.negate(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const e=this.x.toBigInteger(),i=this.y.toBigInteger(),s=this.z,n=t.x.toBigInteger(),h=t.y.toBigInteger(),u=t.z,a=this.curve.q,c=e.multiply(u).mod(a),l=n.multiply(s).mod(a),f=c.subtract(l),p=i.multiply(u).mod(a),g=h.multiply(s).mod(a),d=p.subtract(g);if(r.ZERO.equals(f))return r.ZERO.equals(d)?this.twice():this.curve.infinity;const m=c.add(l),y=s.multiply(u).mod(a),v=f.square().mod(a),b=f.multiply(v).mod(a),T=y.multiply(d.square()).subtract(m.multiply(v)).mod(a),w=f.multiply(T).mod(a),F=d.multiply(v.multiply(c).subtract(T)).subtract(p.multiply(b)).mod(a),B=b.multiply(y).mod(a);return new o(this.curve,this.curve.fromBigInteger(w),this.curve.fromBigInteger(F),B)}twice(){if(this.isInfinity())return this;if(!this.y.toBigInteger().signum())return this.curve.infinity;const t=this.x.toBigInteger(),e=this.y.toBigInteger(),i=this.z,r=this.curve.q,n=this.curve.a.toBigInteger(),h=t.square().multiply(s).add(n.multiply(i.square())).mod(r),u=e.shiftLeft(1).multiply(i).mod(r),a=e.square().mod(r),c=a.multiply(t).multiply(i).mod(r),l=u.square().mod(r),f=h.square().subtract(c.shiftLeft(3)).mod(r),p=u.multiply(f).mod(r),g=h.multiply(c.shiftLeft(2).subtract(f)).subtract(l.shiftLeft(1).multiply(a)).mod(r),d=u.multiply(l).mod(r);return new o(this.curve,this.curve.fromBigInteger(p),this.curve.fromBigInteger(g),d)}multiply(t){if(this.isInfinity())return this;if(!t.signum())return this.curve.infinity;const e=t.multiply(s),i=this.negate();let r=this;for(let s=e.bitLength()-2;s>0;s--){r=r.twice();const n=e.testBit(s),o=t.testBit(s);n!==o&&(r=r.add(n?this:i))}return r}}class h{constructor(t,e,i){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(i),this.infinity=new o(this,null,null)}equals(t){return t===this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)}fromBigInteger(t){return new n(this.q,t)}decodePointHex(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:const e=(t.length-2)/2,i=t.substr(2,e),s=t.substr(e+2,e);return new o(this,this.fromBigInteger(new r(i,16)),this.fromBigInteger(new r(s,16)));default:return null}}}t.exports={ECPointFp:o,ECCurveFp:h}},3953:function(t,e,i){const{BigInteger:r}=i(2237),{encodeDer:s,decodeDer:n}=i(181),o=i(2314),h=i(7295),u=i(8792),{G:a,curve:c,n:l}=u.generateEcparam(),f=0;function p(t,e,i=1){const r=new h;t=u.hexToArray(u.parseUtf8StringToHex(t)),e.length>128&&(e=e.substr(e.length-128));const s=e.substr(0,64),n=e.substr(64);e=r.createPoint(s,n);const o=r.initEncipher(e);r.encryptBlock(t);const a=u.arrayToHex(t);let c=new Array(32);return r.doFinal(c),c=u.arrayToHex(c),i===f?o+a+c:o+c+a}function g(t,e,i=1){const s=new h;e=new r(e,16);const n=t.substr(0,64),o=t.substr(0+n.length,64),a=n.length+o.length;let c=t.substr(a,64),l=t.substr(a+64);i===f&&(c=t.substr(t.length-64),l=t.substr(a,t.length-a-64));const p=u.hexToArray(l),g=s.createPoint(n,o);s.initDecipher(e,g),s.decryptBlock(p);const d=new Array(32);s.doFinal(d);const m=u.arrayToHex(d)===c;if(m){const t=u.arrayToUtf8(p);return t}return""}function d(t,e,{pointPool:i,der:n,hash:o,publicKey:h,userId:a}={}){let c="string"===typeof t?u.parseUtf8StringToHex(t):u.parseArrayBufferToHex(t);o&&(h=h||v(e),c=y(c,h,a));const f=new r(e,16),p=new r(c,16);let g=null,d=null,m=null;do{do{let t;t=i&&i.length?i.pop():b(),g=t.k,d=p.add(t.x1).mod(l)}while(d.equals(r.ZERO)||d.add(g).equals(l));m=f.add(r.ONE).modInverse(l).multiply(g.subtract(d.multiply(f))).mod(l)}while(m.equals(r.ZERO));return n?s(d,m):u.leftPad(d.toString(16),64)+u.leftPad(m.toString(16),64)}function m(t,e,i,{der:s,hash:o,userId:h}={}){let f,p,g="string"===typeof t?u.parseUtf8StringToHex(t):u.parseArrayBufferToHex(t);if(o&&(g=y(g,i,h)),s){const t=n(e);f=t.r,p=t.s}else f=new r(e.substring(0,64),16),p=new r(e.substring(64),16);const d=c.decodePointHex(i),m=new r(g,16),v=f.add(p).mod(l);if(v.equals(r.ZERO))return!1;const b=a.multiply(p).add(d.multiply(v)),T=m.add(b.getX().toBigInteger()).mod(l);return f.equals(T)}function y(t,e,i="1234567812345678"){const r=new o,s=(new o).getZ(a,e.substr(2,128),i),n=u.hexToArray(u.arrayToHex(s).toString()),h=t,c=u.hexToArray(h),l=new Array(r.getDigestSize());return r.blockUpdate(n,0,n.length),r.blockUpdate(c,0,c.length),r.doFinal(l,0),u.arrayToHex(l).toString()}function v(t){const e=a.multiply(new r(t,16)),i=u.leftPad(e.getX().toBigInteger().toString(16),64),s=u.leftPad(e.getY().toBigInteger().toString(16),64);return"04"+i+s}function b(){const t=u.generateKeyPairHex(),e=c.decodePointHex(t.publicKey);return t.k=new r(t.privateKey,16),t.x1=e.getX().toBigInteger(),t}t.exports={generateKeyPairHex:u.generateKeyPairHex,doEncrypt:p,doDecrypt:g,doSignature:d,doVerifySignature:m,getPoint:b}},7295:function(t,e,i){const{BigInteger:r}=i(2237),s=i(2314),n=i(8792);class o{constructor(){this.ct=1,this.p2=null,this.sm3keybase=null,this.sm3c3=null,this.key=new Array(32),this.keyOff=0}reset(){this.sm3keybase=new s,this.sm3c3=new s;const t=n.hexToArray(this.p2.getX().toBigInteger().toRadix(16)),e=n.hexToArray(this.p2.getY().toBigInteger().toRadix(16));this.sm3keybase.blockUpdate(t,0,t.length),this.sm3c3.blockUpdate(t,0,t.length),this.sm3keybase.blockUpdate(e,0,e.length),this.ct=1,this.nextKey()}nextKey(){const t=new s(this.sm3keybase);t.update(this.ct>>24&255),t.update(this.ct>>16&255),t.update(this.ct>>8&255),t.update(255&this.ct),t.doFinal(this.key,0),this.keyOff=0,this.ct++}initEncipher(t){const e=n.generateKeyPairHex(),i=new r(e.privateKey,16);let s=e.publicKey;return this.p2=t.multiply(i),this.reset(),s.length>128&&(s=s.substr(s.length-128)),s}encryptBlock(t){this.sm3c3.blockUpdate(t,0,t.length);for(let e=0;e<t.length;e++)this.keyOff===this.key.length&&this.nextKey(),t[e]^=255&this.key[this.keyOff++]}initDecipher(t,e){this.p2=e.multiply(t),this.reset()}decryptBlock(t){for(let e=0;e<t.length;e++)this.keyOff===this.key.length&&this.nextKey(),t[e]^=255&this.key[this.keyOff++];this.sm3c3.blockUpdate(t,0,t.length)}doFinal(t){const e=n.hexToArray(this.p2.getY().toBigInteger().toRadix(16));this.sm3c3.blockUpdate(e,0,e.length),this.sm3c3.doFinal(t,0),this.reset()}createPoint(t,e){const i="04"+t+e,r=n.getGlobalCurve().decodePointHex(i);return r}}t.exports=o},2314:function(t,e,i){const{BigInteger:r}=i(2237),s=i(8792),n=function(t,e,i,r,s){for(let n=0;n<s;n++)i[r+n]=t[e+n]},o={minValue:-2147483648,maxValue:2147483647,parse(t){if(t<this.minValue){const e=Number(-t),i=e.toString(2),r=i.substr(i.length-31,31);let s="";for(let t=0;t<r.length;t++){const e=r.substr(t,1);s+="0"===e?"1":"0"}const n=parseInt(s,2);return n+1}if(t>this.maxValue){const e=Number(t),i=e.toString(2),r=i.substr(i.length-31,31);let s="";for(let t=0;t<r.length;t++){const e=r.substr(t,1);s+="0"===e?"1":"0"}const n=parseInt(s,2);return-(n+1)}return t},parseByte(t){if(t<0){const e=Number(-t),i=e.toString(2),r=i.substr(i.length-8,8);let s="";for(let t=0;t<r.length;t++){const e=r.substr(t,1);s+="0"===e?"1":"0"}const n=parseInt(s,2);return(n+1)%256}if(t>255){const e=Number(t),i=e.toString(2);return parseInt(i.substr(i.length-8,8),2)}return t}};class h{constructor(...t){this.xBuf=[],this.xBufOff=0,this.byteCount=0,this.DIGEST_LENGTH=32,this.v0=[1937774191,1226093241,388252375,3666478592,2842636476,372324522,3817729613,2969243214],this.v0=[1937774191,1226093241,388252375,-628488704,-1452330820,372324522,-477237683,-1325724082],this.v=new Array(8),this.v_=new Array(8),this.X0=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.X=new Array(68),this.xOff=0,this.T_00_15=2043430169,this.T_16_63=2055708042,t.length>0?this.initDigest(t[0]):this.init()}init(){this.xBuf=new Array(4),this.reset()}initDigest(t){this.xBuf=[].concat(t.xBuf),this.xBufOff=t.xBufOff,this.byteCount=t.byteCount,n(t.X,0,this.X,0,t.X.length),this.xOff=t.xOff,n(t.v,0,this.v,0,t.v.length)}getDigestSize(){return this.DIGEST_LENGTH}reset(){this.byteCount=0,this.xBufOff=0;const t=Object.keys(this.xBuf);for(let e=0,i=t.length;e<i;e++)this.xBuf[t[e]]=null;n(this.v0,0,this.v,0,this.v0.length),this.xOff=0,n(this.X0,0,this.X,0,this.X0.length)}processBlock(){let t;const e=this.X,i=new Array(64);for(t=16;t<68;t++)e[t]=this.p1(e[t-16]^e[t-9]^this.rotate(e[t-3],15))^this.rotate(e[t-13],7)^e[t-6];for(t=0;t<64;t++)i[t]=e[t]^e[t+4];const r=this.v,s=this.v_;let h,u,a,c,l;for(n(r,0,s,0,this.v0.length),t=0;t<16;t++)l=this.rotate(s[0],12),h=o.parse(o.parse(l+s[4])+this.rotate(this.T_00_15,t)),h=this.rotate(h,7),u=h^l,a=o.parse(o.parse(this.ff_00_15(s[0],s[1],s[2])+s[3])+u)+i[t],c=o.parse(o.parse(this.gg_00_15(s[4],s[5],s[6])+s[7])+h)+e[t],s[3]=s[2],s[2]=this.rotate(s[1],9),s[1]=s[0],s[0]=a,s[7]=s[6],s[6]=this.rotate(s[5],19),s[5]=s[4],s[4]=this.p0(c);for(t=16;t<64;t++)l=this.rotate(s[0],12),h=o.parse(o.parse(l+s[4])+this.rotate(this.T_16_63,t)),h=this.rotate(h,7),u=h^l,a=o.parse(o.parse(this.ff_16_63(s[0],s[1],s[2])+s[3])+u)+i[t],c=o.parse(o.parse(this.gg_16_63(s[4],s[5],s[6])+s[7])+h)+e[t],s[3]=s[2],s[2]=this.rotate(s[1],9),s[1]=s[0],s[0]=a,s[7]=s[6],s[6]=this.rotate(s[5],19),s[5]=s[4],s[4]=this.p0(c);for(t=0;t<8;t++)r[t]^=o.parse(s[t]);this.xOff=0,n(this.X0,0,this.X,0,this.X0.length)}processWord(t,e){let i=t[e]<<24;i|=(255&t[++e])<<16,i|=(255&t[++e])<<8,i|=255&t[++e],this.X[this.xOff]=i,16===++this.xOff&&this.processBlock()}processLength(t){this.xOff>14&&this.processBlock(),this.X[14]=this.urShiftLong(t,32),this.X[15]=4294967295&t}intToBigEndian(t,e,i){e[i]=255&o.parseByte(this.urShift(t,24)),e[++i]=255&o.parseByte(this.urShift(t,16)),e[++i]=255&o.parseByte(this.urShift(t,8)),e[++i]=255&o.parseByte(t)}doFinal(t,e){this.finish();for(let i=0;i<8;i++)this.intToBigEndian(this.v[i],t,e+4*i);return this.reset(),this.DIGEST_LENGTH}update(t){this.xBuf[this.xBufOff++]=t,this.xBufOff===this.xBuf.length&&(this.processWord(this.xBuf,0),this.xBufOff=0),this.byteCount++}blockUpdate(t,e,i){while(0!==this.xBufOff&&i>0)this.update(t[e]),e++,i--;while(i>this.xBuf.length)this.processWord(t,e),e+=this.xBuf.length,i-=this.xBuf.length,this.byteCount+=this.xBuf.length;while(i>0)this.update(t[e]),e++,i--}finish(){const t=this.byteCount<<3;this.update(128);while(0!==this.xBufOff)this.update(0);this.processLength(t),this.processBlock()}rotate(t,e){return t<<e|this.urShift(t,32-e)}p0(t){return t^this.rotate(t,9)^this.rotate(t,17)}p1(t){return t^this.rotate(t,15)^this.rotate(t,23)}ff_00_15(t,e,i){return t^e^i}ff_16_63(t,e,i){return t&e|t&i|e&i}gg_00_15(t,e,i){return t^e^i}gg_16_63(t,e,i){return t&e|~t&i}urShift(t,e){return(t>o.maxValue||t<o.minValue)&&(t=o.parse(t)),t>>>e}urShiftLong(t,e){let i;const s=new r;if(s.fromInt(t),s.signum()>=0)i=s.shiftRight(e).intValue();else{const s=new r;s.fromInt(2);const n=~e;let o="";if(n<0){const s=64+n;for(let t=0;t<s;t++)o+="0";const h=new r;h.fromInt(t>>e);const u=new r("10"+o,2);o=u.toRadix(10);const a=u.add(h);i=a.toRadix(10)}else o=s.shiftLeft(~e).intValue(),i=(t>>e)+o}return i}getZ(t,e,i){let r=0;if(i){if("string"!==typeof i)throw new Error("sm2: Type of userId Must be String! Receive Type: "+typeof i);if(i.length>=8192)throw new Error(`sm2: The Length of userId Must Less Than 8192! Length: ${i.length}`);i=s.parseUtf8StringToHex(i),r=4*i.length}if(this.update(r>>8&255),this.update(255&r),i){const t=s.hexToArray(i);this.blockUpdate(t,0,t.length)}const n=s.hexToArray(t.curve.a.toBigInteger().toRadix(16)),o=s.hexToArray(t.curve.b.toBigInteger().toRadix(16)),h=s.hexToArray(t.getX().toBigInteger().toRadix(16)),u=s.hexToArray(t.getY().toBigInteger().toRadix(16)),a=s.hexToArray(e.substr(0,64)),c=s.hexToArray(e.substr(64,64));this.blockUpdate(n,0,n.length),this.blockUpdate(o,0,o.length),this.blockUpdate(h,0,h.length),this.blockUpdate(u,0,u.length),this.blockUpdate(a,0,a.length),this.blockUpdate(c,0,c.length);const l=new Array(this.getDigestSize());return this.doFinal(l,0),l}}t.exports=h},8792:function(t,e,i){const{BigInteger:r,SecureRandom:s}=i(2237),{ECCurveFp:n}=i(6596),o=new s,{curve:h,G:u,n:a}=l();function c(){return h}function l(){const t=new r("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFF",16),e=new r("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFC",16),i=new r("28E9FA9E9D9F5E344D5A9E4BCF6509A7F39789F515AB8F92DDBCBD414D940E93",16),s=new n(t,e,i),o="32C4AE2C1F1981195F9904466A39C9948FE30BBFF2660BE1715A4589334C74C7",h="BC3736A2F4F6779C59BDCEE36B692153D0A9877CC62A474002DF32E52139F0A0",u=s.decodePointHex("04"+o+h),a=new r("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFF7203DF6B21C6052B53BBF40939D54123",16);return{curve:s,G:u,n:a}}function f(){const t=new r(a.bitLength(),o).mod(a.subtract(r.ONE)).add(r.ONE),e=d(t.toString(16),64),i=u.multiply(t),s=d(i.getX().toBigInteger().toString(16),64),n=d(i.getY().toBigInteger().toString(16),64),h="04"+s+n;return{privateKey:e,publicKey:h}}function p(t){t=unescape(encodeURIComponent(t));const e=t.length,i=[];for(let s=0;s<e;s++)i[s>>>2]|=(255&t.charCodeAt(s))<<24-s%4*8;const r=[];for(let s=0;s<e;s++){const t=i[s>>>2]>>>24-s%4*8&255;r.push((t>>>4).toString(16)),r.push((15&t).toString(16))}return r.join("")}function g(t){return Array.prototype.map.call(new Uint8Array(t),(t=>("00"+t.toString(16)).slice(-2))).join("")}function d(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t}function m(t){const e=[];let i=0;for(let s=0;s<2*t.length;s+=2)e[s>>>3]|=parseInt(t[i],10)<<24-s%8*4,i++;const r=[];for(let s=0;s<t.length;s++){const t=e[s>>>2]>>>24-s%4*8&255;r.push((t>>>4).toString(16)),r.push((15&t).toString(16))}return r.join("")}function y(t){const e=[];let i=0;for(let s=0;s<2*t.length;s+=2)e[s>>>3]|=parseInt(t[i],10)<<24-s%8*4,i++;try{const i=[];for(let r=0;r<t.length;r++){const t=e[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(t))}return decodeURIComponent(escape(i.join("")))}catch(r){throw new Error("Malformed UTF-8 data")}}function v(t){const e=[];let i=t.length;i%2!==0&&(t=d(t,i+1)),i=t.length;for(let r=0;r<i;r+=2)e.push(parseInt(t.substr(r,2),16));return e}t.exports={getGlobalCurve:c,generateEcparam:l,generateKeyPairHex:f,parseUtf8StringToHex:p,parseArrayBufferToHex:g,leftPad:d,arrayToHex:m,arrayToUtf8:y,hexToArray:v}},2771:function(t){function e(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t}function i(t){const i=8;let r="";for(let s=0;s<t.length/i;s++)r+=e(parseInt(t.substr(s*i,i),2).toString(16),2);return r}function r(t){const i=2;let r="";for(let s=0;s<t.length/i;s++)r+=e(parseInt(t.substr(s*i,i),16).toString(2),8);return r}function s(t){let i="";for(let r=0,s=t.length;r<s;r++){const s=t[r];i+=e(s.codePointAt(0).toString(2),8)}return i}function n(t,e){return t.substring(e%t.length)+t.substr(0,e%t.length)}function o(t,e,i){const r=t||"",s=e||"",n=[];let o;for(let h=r.length-1;h>=0;h--)o=i(r[h],s[h],o),n[h]=o[0];return n.join("")}function h(t,e){return o(t,e,((t,e)=>[t===e?"0":"1"]))}function u(t,e){return o(t,e,((t,e)=>["1"===t&&"1"===e?"1":"0"]))}function a(t,e){return o(t,e,((t,e)=>["1"===t||"1"===e?"1":"0"]))}function c(t,e){const i=o(t,e,((t,e,i)=>{const r=i?i[1]:"0";return t!==e?["0"===r?"1":"0",r]:[r,t]}));return i}function l(t){return o(t,void 0,(t=>["1"===t?"0":"1"]))}function f(t){return(...e)=>e.reduce(((e,i)=>t(e,i)))}function p(t){return f(h)(t,n(t,9),n(t,17))}function g(t){return f(h)(t,n(t,15),n(t,23))}function d(t,e,i,r){return r>=0&&r<=15?f(h)(t,e,i):f(a)(u(t,e),u(t,i),u(e,i))}function m(t,e,i,r){return r>=0&&r<=15?f(h)(t,e,i):a(u(t,e),u(l(t),i))}function y(t){return r(t>=0&&t<=15?"79cc4519":"7a879d8a")}function v(t,e){const i=32,r=[],s=[];for(let n=0;n<16;n++)r.push(e.substr(n*i,i));for(let c=16;c<68;c++)r.push(f(h)(g(f(h)(r[c-16],r[c-9],n(r[c-3],15))),n(r[c-13],7),r[c-6]));for(let n=0;n<64;n++)s.push(h(r[n],r[n+4]));const o=[];for(let n=0;n<8;n++)o.push(t.substr(n*i,i));let u,a,l,v,b=o[0],T=o[1],w=o[2],F=o[3],B=o[4],x=o[5],S=o[6],D=o[7];for(let g=0;g<64;g++)u=n(f(c)(n(b,12),B,n(y(g),g)),7),a=h(u,n(b,12)),l=f(c)(d(b,T,w,g),F,a,s[g]),v=f(c)(m(B,x,S,g),D,u,r[g]),F=w,w=n(T,9),T=b,b=l,D=S,S=n(x,19),x=B,B=p(v);return h([b,T,w,F,B,x,S,D].join(""),t)}t.exports=function(t){const n=s(t),o=n.length;let h=o%512;h=h>=448?512-h%448-1:448-h-1;const u=`${n}1${e("",h)}${e(o.toString(2),64)}`.toString(),a=(o+h+65)/512;let c=r("7380166f4914b2b9172442d7da8a0600a96f30bc163138aae38dee4db0fb0e4e");for(let e=0;e<=a-1;e++){const t=u.substr(512*e,512);c=v(c,t)}return i(c)}},1895:function(t){const e=0,i=32,r=16,s=[214,144,233,254,204,225,61,183,22,182,20,194,40,251,44,5,43,103,154,118,42,190,4,195,170,68,19,38,73,134,6,153,156,66,80,244,145,239,152,122,51,84,11,67,237,207,172,98,228,179,28,169,201,8,232,149,128,223,148,250,117,143,63,166,71,7,167,252,243,115,23,186,131,89,60,25,230,133,79,168,104,107,129,178,113,100,218,139,248,235,15,75,112,86,157,53,30,36,14,94,99,88,209,162,37,34,124,59,1,33,120,135,212,0,70,87,159,211,39,82,76,54,2,231,160,196,200,158,234,191,138,210,64,199,56,181,163,247,242,206,249,97,21,161,224,174,93,164,155,52,26,85,173,147,50,48,245,140,177,227,29,246,226,46,130,102,202,96,192,41,35,171,13,83,78,111,213,219,55,69,222,253,142,47,3,255,106,114,109,108,91,81,141,27,175,146,187,221,188,127,17,217,92,65,31,16,90,216,10,193,49,136,165,205,123,189,45,116,208,18,184,229,180,176,137,105,151,74,12,150,119,126,101,185,241,9,197,110,198,132,24,240,125,236,58,220,77,32,121,238,95,62,215,203,57,72],n=[462357,472066609,943670861,1415275113,1886879365,2358483617,2830087869,3301692121,3773296373,4228057617,404694573,876298825,1347903077,1819507329,2291111581,2762715833,3234320085,3705924337,4177462797,337322537,808926789,1280531041,1752135293,2223739545,2695343797,3166948049,3638552301,4110090761,269950501,741554753,1213159005,1684763257];function o(t,e){return t<<e|t>>>32-e}function h(t){return(255&s[t>>>24&255])<<24|(255&s[t>>>16&255])<<16|(255&s[t>>>8&255])<<8|255&s[255&t]}function u(t){return t^o(t,2)^o(t,10)^o(t,18)^o(t,24)}function a(t){return t^o(t,13)^o(t,23)}function c(t,e,i){let r,s;const n=new Array(4),o=new Array(4);for(let h=0;h<4;h++)o[0]=255&t[0+4*h],o[1]=255&t[1+4*h],o[2]=255&t[2+4*h],o[3]=255&t[3+4*h],n[h]=o[0]<<24|o[1]<<16|o[2]<<8|o[3];for(r=0;r<32;r+=4)s=n[1]^n[2]^n[3]^i[r+0],s=h(s),n[0]^=u(s),s=n[2]^n[3]^n[0]^i[r+1],s=h(s),n[1]^=u(s),s=n[3]^n[0]^n[1]^i[r+2],s=h(s),n[2]^=u(s),s=n[0]^n[1]^n[2]^i[r+3],s=h(s),n[3]^=u(s);for(let h=0;h<16;h+=4)e[h]=n[3-h/4]>>>24&255,e[h+1]=n[3-h/4]>>>16&255,e[h+2]=n[3-h/4]>>>8&255,e[h+3]=255&n[3-h/4]}function l(t,i,r){let s,o;const u=new Array(4),c=new Array(4);for(let e=0;e<4;e++)c[0]=255&t[0+4*e],c[1]=255&t[1+4*e],c[2]=255&t[2+4*e],c[3]=255&t[3+4*e],u[e]=c[0]<<24|c[1]<<16|c[2]<<8|c[3];for(u[0]^=2746333894,u[1]^=1453994832,u[2]^=1736282519,u[3]^=2993693404,s=0;s<32;s+=4)o=u[1]^u[2]^u[3]^n[s+0],o=h(o),i[s+0]=u[0]^=a(o),o=u[2]^u[3]^u[0]^n[s+1],o=h(o),i[s+1]=u[1]^=a(o),o=u[3]^u[0]^u[1]^n[s+2],o=h(o),i[s+2]=u[2]^=a(o),o=u[0]^u[1]^u[2]^n[s+3],o=h(o),i[s+3]=u[3]^=a(o);if(r===e)for(s=0;s<16;s++)o=i[s],i[s]=i[31-s],i[31-s]=o}function f(t,e,s){const n=[];let o=0;const h=new Array(i);l(e,h,s);let u=new Array(16);const a=new Array(16);let f=t.length;while(f>=r){u=t.slice(o,o+16),c(u,a,h);for(let t=0;t<r;t++)n[o+t]=a[t];f-=r,o+=r}return n}t.exports={encrypt(t,e){return f(t,e,1)},decrypt(t,e){return f(t,e,0)}}}}]);