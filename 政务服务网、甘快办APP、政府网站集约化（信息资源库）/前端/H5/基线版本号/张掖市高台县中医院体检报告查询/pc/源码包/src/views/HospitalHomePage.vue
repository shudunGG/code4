<template>
  <div class="pc-content">
    <div class="pc">
      <div class="pc-left">
        <div class="left_top">
          <div class="pc-left-top">
            <div class="yy">
              <img
                src="../assets/img/zyiyuan.png"
                alt=""
                width="120x"
                height="120px"
              />
              <span class="title">高台县中医医院</span>
            </div>
          </div>
          <div class="pc-left-center">
            <div class="xx">
              <div class="one">
                <div class="one-left"></div>
                <div class="one-tite">基本信息</div>
              </div>
              <div class="two">
                <img
                  src="../assets/img/dh.png"
                  alt=""
                  width="18px"
                  height="15px"
                />
                <div class="two-title">0936-6621610</div>
              </div>
              <div class="two">
                <img
                  src="../assets/img/dz.png"
                  alt=""
                  width="17px"
                  height="20px"
                />
                <div class="two-title">
                  {{ "高台县城关镇滨河社区北环路662号" }}
                  <span @click="map">查看地图</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="pc-left-content">
          <div class="one">
            <div class="one-left"></div>
            <div class="one-tite">医院介绍</div>
          </div>
          <div class="two info-text">
            高台县中医医院是一家集医疗、预防、保健、急救、康复、教学科研为
            一体、中医药特色突出的二级甲等中医综合医院。医院占地面积108亩，建
            筑面积30657平方米，总投资1.78亿元。开放病床450张，门诊患者约18
            万余人次/年，出院病人1万余人次/年。现有职工373人，专业技术人员中
            正高级职称7人，副高级职称36人，中级职称92人。先后建成“名医工作
            室”6个，有5人被评为“甘肃省基层名中医”，3人被评为全省“优秀医师”，
            1人被评为全省“中医药工作先进个人”、张掖首届百名优秀人才，2人被命
            名为张掖市管拔尖人才，1人被评为“张掖最美科技工作者”、“甘肃省科普大
            篷车项目活动优秀科普志愿者”。
            <br />
          </div>
          <div class="two info-text">
            医院设有呼吸内科、心血管内科、普外科、骨外科、神经外（内）科、
            儿科、妇产科、针灸推拿科、康复科、风湿病科、老年医学科、消化病科、
            糖尿病科、脾胃病科、肾病科、脑病科、ICU、麻醉手术科、急诊科、肛肠科、
            皮肤科、眼科、口腔科、耳鼻喉科、放射科、磁共振室、超声科、检验科、
            健康管理中心、血液透析中心、内窥镜中心、验光配镜中心、高压氧室等49
            个临床医技职能科室。另外，医院于2018年挂牌成立了甘肃省中医院高台分
            院，2019年建成了卒中中心，胸痛中心于2021年获得中国胸痛中心总部认证，
            2022年建成了危重孕产妇、新生儿救治中心，2023年建成了创伤救治中心，
            是全县唯一急诊急救“五大中心”通过国家、省市验收评估的医院。通过与
            四川大学华西医院、西安交大一附院、兰州大学附属一院、二院、省人民医
            院、省中医院、省妇幼保健院、省肿瘤医院等省内外三甲医院的协作，建立
            起了技术水平全县领先，业务辐射周边地区的诊疗平台。医院拥有1.5T磁共
            振、16排螺旋CT、DSA、GE四维彩超、全自动生化分析仪、动态DR、口腔CT、
            数字化乳腺X射线机、腹腔镜、椎间孔镜、电子胃镜、电子喉镜、电子支气
            管镜、电测听仪、手术显微镜、电切镜、膀胱镜、高压氧舱、血液透析机、
            舌面脉信息采集体质辨识系统、颈椎弧度牵引治疗仪、中药熏蒸多功能治疗
            机等先进的医疗设备620余台（件），设备总价值达1.1亿元。近年来，医院
            新开展了可控性脑室腹腔分流术、囊性脑膜瘤切除术、三叉神经微血管减压
            术、脑干血肿清除术、髋关节置换术、膝关节置换术、胰腺肿瘤切除术、食
            道癌根治术、胶囊内镜检查以及外科、妇科腔镜微创手术、床旁连续性肾脏
            替代疗法（CRRT技术）、椎间孔镜微创椎间盘摘除术、关节镜手术、支气管镜
            下活检及肺泡灌洗术、心脏食道调搏术、经皮冠状动脉腔内成形术(PTCA)、
            冠脉造影术、经皮冠状动脉内支架植入术等多项新业务和新技术。完成市级
            科技成果７项，荣获县级科技进步奖12项，获得国家发明专利２项、外观设
            计专利２项、实用新型发明专利８项，建成县“人才创新创业示范基地”2
            个，“科研工作站”1个，神经外科承担的《重型颅脑损伤综合救治项目》获
            得省委组织部“陇原青年创新人才”计划扶持，为促进医院科技进步与创新
            起到了良好推动作用。。<br />
          </div>
          <div class="two info-text">
            医院坚持“科技兴院、管理强院、服务荣院、宣传知院、文化铸院”的
            中长期发展战略，突出中医专科特色优势，现拥有10个省、市、县级重点专
            （学）科，其中3个省级重点中医药专科：糖尿病专科、儿科、康复科；2
            个全省县级重点学科：神经外科、肺病科；2个市级重点专科：腰椎病专科、
            中医儿科；3个县级重点中医药专科：眼科、肛肠科、皮肤病专科。2023年
            被确定为“甘肃中医药文化宣传教育基地”。医院依托中药制剂中心建成高台
            县“中药制剂科研工作站”，自主研发了喘咳安丸、佛香胶囊等14个特色院
            内中药制剂品种，均被列入医保目录。完成的《中药制剂新品种“清热化痰
            止咳颗粒”的研发与应用》通过市级科技计划项目鉴定验收，申报的技术研
            究开发项目《中药制剂新品种“银柴感冒颗粒”的研发与应用》列入2023年
            县级科技项目计划。医院在发挥中医药预防、保健、养生、调理、治疗、康
            复六大特色方面大力倡导“治未病”理念，建成高台中医馆和“治未病”中
            心，设有中医药发展史展厅、中药标本器具古籍展厅及名中医工作室、推拿
            按摩室、熏蒸室、蜡疗室、针灸室等治疗区，开展中医体质辨识、针刺艾灸、
            拔罐刮痧、药浴汗蒸、火疗蜡疗、砭石理疗、推拿按摩、扶阳透灸、经络疏
            通、淋巴排毒、磁疗热疗、中药熏蒸、中药美容、埋线减肥、产后康复、穴
            位贴敷、穴位注射、耳穴压豆、耳穴埋针、隔物灸等一系列中医适宜技术和
            养生疗法。同时，医院定期邀请省级医院特色专科的知名专家坐诊，让本地
            群众可以在家门口享受到省级专家的优质服务。
          </div>
          <div class="two info-text">
            医院先后荣获“全省优质医疗服务示范医院”“全市医疗服务先进单位”
            “市级文明单位”“全市民族团结进步示范单位”“市级卫生单位”“市级园林
            式单位”“先进党组织”“精神文明示范点”等荣誉称号。高台县中医医院始
            终坚持“以人为本、患者至上”的服务宗旨，努力培养有人文精神的医护人
            员、提供有关怀的医疗、打造有温度的医院。
          </div>
        </div>
      </div>
    </div>
    <div class="pc-content" style="margin-top: 30px">
      <router-view></router-view>
    </div>
  </div>
</template>

<script>
import { getUserInfo, getToken } from "@/api/userInfo";
import { serveAPI } from "@/api/serve";
import tools, {
  name,
  IdNumberDesensitization,
  phone,
  getRequest,
} from "../tools/tool";
export default {
  data() {
    return {
      HospitalList: [],
      hospitalName: null,
      hospitalInformation: {},
    };
  },
  created() {
    let url = location.href; // 上线使用这个
    this.hospitalName = getRequest(url, "hospitalName", "");
    console.log(this.hospitalName, "hospitalName");
    this.getUserInfo();
  },
  methods: {
    // 获取用户信息
    async getUserInfo() {
      const loading = this.$loading({
        fullscreen: true,
        text: "加载中,请稍等",
        spinner: "el-icon-loading",
        background: "rgba(f,f,f,0.7)",
      });
      await getUserInfo().then((res) => {
        console.log(res);
        // 获取token
        getToken().then((result) => {
          console.log(result, "result");
          if (res.code === "200") {
            loading.close();
            if (res.params.userType == "1") {
              console.log(res);
              let userInfo = res.params;
              userInfo.name = name(tools.decryptSM2(res.params.userName));
              userInfo.card = IdNumberDesensitization(
                tools.decryptSM2(res.params.userId)
              );
              userInfo.phone = phone(tools.decryptSM2(res.params.phone));
              userInfo.authCode = tools.decryptSM2(
                result.data.authCode,
                "0e967306db2ed5f93efb8eb41a1043cf4782824a5c5e41874ab3305e4db6e6e7"
              );
              userInfo.token = tools.decryptSM2(
                result.data.token,
                "0e967306db2ed5f93efb8eb41a1043cf4782824a5c5e41874ab3305e4db6e6e7"
              );
              this.userInfo = userInfo;
              this.$store.commit("userInfo", userInfo);
              console.log(userInfo, "用户信息");
            } else {
              this.$message.warning("该业务仅限个人用户办理");
            }
          } else {
            loading.close();
            location.href =
              "https://zwfw.gansu.gov.cn/szgs/member/wwLogin/againLgin.do?againUrl=" +
              encodeURIComponent(location.href);
          }
        });
      });
    },
    // 获取医院列表接口
    getHospitalList() {
      console.log(this.hospitalName, "hospitalName");
      let params = {
        pageNum: 1,
        pageSize: 10,
        hospitalName: JSON.stringify({
          type: 1,
          content: this.hospitalName || "高台县中医医院",
          left: "",
          right: "",
        }),
      };
      serveAPI
        .getCmsInfo(
          "cmsnzjk",
          "cmslistInfonzjk",
          params,
          "452dc08cbf3e40eb872e2b326191b5f2"
        )
        .then((res) => {
          if (
            res.code == 200 &&
            res.success &&
            res.data.dataResult.dataList.length > 0
          ) {
            console.log(res, "天祝藏族自治县藏医院");
            this.hospitalInformation = res.data.dataResult.dataList[0];
            this.$store.commit("hospitalInformation", this.hospitalInformation);
          } else {
            this.$message.info(res.message || "未查询到相关信息");
          }
        })
        .catch((res) => {
          this.$message.error(res.message || "网络异常，请稍后重试！");
        });
    },
    map() {
      window.open(
        `https://zwfw.gansu.gov.cn/jmopen_files/webapp/html5/zwdtmhwzrcufp/index.html#/search?location=${encodeURIComponent(
          "高台县城关镇滨河社区北环路662号"
        )}`
      );
    },
  },
};
</script>

<style scoped lang="less">
.pc-content {
  width: 1200px;
  margin: 0 auto;
  .pc {
    display: flex;
    margin-bottom: 30px;

    .pc-left {
      box-shadow: 0 3px 18px #0000000d;
      padding: 20px;
      background: linear-gradient(179.8deg, #e8f3ff 0%, #fff 100%);
      box-shadow: 0 3px 18px #0000000d;
      .left_top {
        display: flex;
        justify-content: space-between;
        border-bottom: 1px solid #eee;
        .pc-left-top {
          .yy {
            display: flex;
            align-items: center;

            img {
              width: 120px;
              height: 120px;
            }
            .title {
              font-family: "PingFang SC Bold";
              font-weight: 700;
              font-size: 20px;
              color: #333;
              margin-left: 20px;
            }
          }
        }
        .pc-left-center {
          display: flex;
          justify-content: space-between;
          padding-right: 174px;
          .xx {
            .one {
              display: flex;
              align-items: center;
              margin-bottom: 20px;
              .one-left {
                width: 3px;
                height: 15px;
                background: #1e82d8;
              }
              .one-tite {
                font-family: "PingFang SC Bold";
                font-weight: 700;
                font-size: 16px;
                color: #333;
                margin-left: 10px;
              }
            }
            .two {
              display: flex;
              align-items: center;
              margin-bottom: 20px;

              .two-title {
                font-family: "PingFang SC Bold";
                font-weight: 700;
                font-size: 16px;
                color: #333;
                margin-left: 16px;
                span {
                  padding: 2.5px 5px;
                  border-radius: 2px;
                  background: #d5e9fb;
                  color: #3f87f3;
                  margin-left: 20px;
                  cursor: pointer;
                }
              }
            }
          }
        }
      }

      .pc-left-content {
        padding-top: 20px;
        .one {
          display: flex;
          align-items: center;
          margin-bottom: 20px;
          .one-left {
            width: 3px;
            height: 15px;
            background: #1e82d8;
          }
          .one-tite {
            font-family: "PingFang SC Bold";
            font-weight: 700;
            font-size: 16px;
            color: #333;
            margin-left: 10px;
          }
        }
      }
    }
    .pc-right {
      width: 370px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      .pc-right-top {
        background-color: #fff;
        box-shadow: 0 3px 18px #0000000d;
        .title {
          display: flex;
          align-items: center;
          font-family: "PingFang SC Bold";
          font-weight: 700;
          font-size: 16px;
          color: #333;
          border-bottom: 1px solid #eee;
          padding: 20px 0;
        }
        .content {
          display: flex;
          align-items: center;
          margin: 20px;
          padding-bottom: 20px;
          border-bottom: 1px solid #eee;
          .content-right {
            margin-left: 20px;
            .top {
              font-family: "PingFang SC Bold";
              font-weight: 700;
              font-size: 16px;
              color: #333;
              margin-bottom: 10px;
            }
            .bottom {
              font-family: "PingFang SC Bold";
              font-weight: 700;
              font-size: 14px;
              color: #999;
              width: 154px;
              line-height: 28px;
            }
          }
        }
      }
      .pc-right-bottom {
        box-shadow: 0 3px 18px #0000000d;
        background-color: #fff;
        .title {
          display: flex;
          align-items: center;
          font-family: "PingFang SC Bold";
          font-weight: 700;
          font-size: 16px;
          color: #333;
          border-bottom: 1px solid #eee;
          padding: 20px 0;
        }
        .content {
          .content-right {
            margin: 0 20px;
            padding: 20px 0;
            border-bottom: 1px solid #eee;
            .top {
              font-family: "PingFang SC Bold";
              font-weight: 700;
              font-size: 16px;
              color: #333;
              margin-bottom: 10px;
            }
            .bottom {
              font-family: "PingFang SC Bold";
              font-weight: 700;
              font-size: 14px;
              color: #999;
            }
          }
        }
      }
    }
  }
}
.info-text {
  text-indent: 2em;
}
.two {
  font-family: "PingFang SC Bold";
  font-weight: 700;
  font-size: 16px !important;
  line-height: 32px;
  color: #333;
  /deep/ p {
    font-size: 16px !important;
    line-height: 32px;
    color: #333;
    span {
      background: none !important;
    }
  }
}
/deep/ .el-dialog__body {
  text-align: center;
}
@media screen and (max-width: 750px) {
  .pc-content {
    width: 100% !important;
  }
  .pc-left-center {
    padding: 0 !important;
  }
  .left_top {
    flex-direction: column;
  }
  .pc-left-top {
    margin-bottom: 20px;
  }
}
</style>
