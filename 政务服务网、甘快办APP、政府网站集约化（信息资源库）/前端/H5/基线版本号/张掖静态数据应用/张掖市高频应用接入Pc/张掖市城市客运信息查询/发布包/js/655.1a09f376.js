"use strict";(self["webpackChunkxsecmcx"]=self["webpackChunkxsecmcx"]||[]).push([[655],{655:function(t,a,e){e.r(a),e.d(a,{default:function(){return C}});var s=function(){var t=this,a=t._self._c;return a("section",{staticClass:"result-container"},[a("h2",{staticClass:"title"},[t._v("查询结果")]),a("div",{staticClass:"result"},[[t._l(t.resultsObj.dataList,(function(e,s){return a("table",{key:s},[a("tr",[a("td",{staticClass:"tab_bt"},[t._v("起点")]),a("td",[t._v(t._s(e.qidian||"暂无数据"))]),a("td",{staticClass:"tab_bt"},[t._v("途经点")]),a("td",[t._v(t._s(e.tujingdian||"暂无数据"))])]),a("tr",[a("td",{staticClass:"tab_bt"},[t._v("终点")]),a("td",[t._v(t._s(e.zhongdian||"暂无数据"))]),a("td",{staticClass:"tab_bt"},[t._v("运输企业名称")]),a("td",[t._v(t._s(e.qiyemingcheng||"暂无数据"))])]),a("tr",[a("td",{staticClass:"tab_bt"},[t._v("单程")]),a("td",[t._v(t._s(e.dancheng||"暂无数据"))]),a("td",{staticClass:"tab_bt"},[t._v("单车日营运里程")]),a("td",[t._v(t._s(e.riyunyinglicheng||"暂无数据"))])]),a("tr",[a("td",{staticClass:"tab_bt"},[t._v("主要途径地")]),a("td",[t._v(t._s(e.tingkaozhandian||"暂无数据"))]),a("td",{staticClass:"tab_bt"},[t._v("停靠站点")]),a("td",[t._v(t._s(e.tingkaozhandian||"暂无数据"))])]),a("tr",[a("td",{staticClass:"tab_bt"},[t._v("运营车辆数")]),a("td",[t._v(t._s(e.cheliangshu||"暂无数据"))]),a("td",{staticClass:"tab_bt"},[t._v("日发班次")]),a("td",[t._v(t._s(e.banci||"暂无数据"))])]),a("tr",[a("td",{staticClass:"tab_bt"},[t._v("票价")]),a("td",[t._v(t._s(e.piaojia||"暂无数据"))]),a("td",{staticClass:"tab_bt"},[t._v("是否在高速公路运行")]),a("td",[t._v(t._s(e.gaosuyunxing||"暂无数据"))])])])})),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页",background:"","hide-on-single-page":!0,layout:"prev, pager, next, jumper","page-size":t.params.pageSize,total:t.resultsObj.totalCount,"current-page":t.currentPage3},on:{"current-change":t.currentChange,"size-change":t.handleSizeChange,"update:currentPage":function(a){t.currentPage3=a},"update:current-page":function(a){t.currentPage3=a}}})],1)]],2)])},n=[],r=e(6265),i=e.n(r);const c={APP_ID:"cmsnzjk",httpRequestJpaas:"https://zwfw.gansu.gov.cn/jpaas-jags-server/interface/"},{httpRequestJpaas:u}=c,d="cmslistInfonzjk",o={createSignJpaas:function(t={}){return new Promise(((a,e)=>{i()({method:"post",url:`${u}createsign`,data:t}).then((function(t){if(t.data.success){const{sign:e}=t.data.data;a(e)}else e(t)})).catch((function(t){e(t)}))}))},getDataFromJpaas:function(t={}){return new Promise(((a,e)=>{i()({method:"post",url:`${u}gateway`,data:t}).then((function(t){if(200==t.data.code&&1==t.data.success){const s=JSON.parse(t.data.data);if(200==s.code)a(s);else{const a=JSON.parse(JSON.parse(t.data.data).data);e(a)}}else e(t)})).catch((function(t){e(t)}))}))},getData:function({columnId:t="",params:a={}}={}){const e=new URLSearchParams;return e.append("header","{}"),e.append("version","1.0"),e.append("charset","UTF-8"),e.append("origin","1"),e.append("timestamp",(new Date).getTime()),e.append("interface_id",d),e.append("app_id","cmsnzjk"),e.append("biz_content",JSON.stringify(Object.assign({columnId:t},a))),new Promise(((t,a)=>{o.createSignJpaas(e).then((t=>(e.append("sign",t),o.getDataFromJpaas(e)))).then((a=>{try{var e=JSON.parse(a);t("object"===typeof e&&e?JSON.parse(a):a)}catch(s){t(a)}})).catch((t=>{a(t)}))}))}};var l=o;const{getData:p}=l;var h={queryList(t){return p({columnId:"12ccdf6cc7a34efdadb4aa396078764e",params:t})}};function g(t){if(!t)return"";let a=t.substr(0,1);for(let e=0;e<t.length-1;e++)a+="*";return a}function m(t,a,e){if(!t&&a+e>=t.length)return"";const s=t.substring(0,a),n=t.substring(t.length-e,t.length);let r="";for(let i=0;i<t.length-e-a;i++)r+="*";return s+r+n}var _={name:"ResultsView",data(){return{formData:{},params:{pageSize:5,pageNum:1},resultsObj:{},currentPage3:1}},created(){this.formData=this.$route.params.res,void 0===this.formData&&(this.formData={name:"",code:"",selectName:"",selectArr:[]}),this.selectResult(this.params)},beforeMount(){this.selectResult(this.params)},methods:{desensitizedName:g,desensitizedCommon:m,currentChange(t){this.params.pageNum=t,this.selectResult(this.params)},handleSizeChange(){this.params.pageNum=this.currentPage3,this.selectResult(this.params)},async selectResult(t){this.formData.name?this.params.zhongdian=encodeURIComponent(JSON.stringify({type:2,content:this.formData.name,left:"",right:""})):this.params={pageSize:5,pageNum:1};const a=this.$loading({text:"Loading...",spinner:"el-icon-loading",background:"rgba(255,255,255,0.9)",target:document.getElementById("resultDiag")});try{const a=await h.queryList(t);if("200"!==a.code||!a.success)throw new Error("查询失败");0===a.data.dataResult.dataList.length?this.$router.push("/index/no-results"):(this.resultsObj=a.data.dataResult,this.$forceUpdate())}catch(e){this.$message({type:"error",message:"查询失败，请重试或联系管理员"}),this.$router.push({name:"Index"})}a.close()}},watch:{$route(){this.params={pageNum:1,pageSize:5},this.currentPage3=1,this.formData=this.$route.params.res,this.selectResult(this.params)}}},f=_,b=e(1001),v=(0,b.Z)(f,s,n,!1,null,"7fbd5c58",null),C=v.exports}}]);